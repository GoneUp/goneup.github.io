(function(t){function e(e){for(var s,r,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},o=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),n=a.n(s);n.a},"17a0":function(t,e,a){"use strict";var s=a("6377"),n=a.n(s);n.a},"1aa8":function(t,e,a){},2814:function(t,e,a){"use strict";var s=a("5e03"),n=a.n(s);n.a},3227:function(t,e,a){},"38f6":function(t,e,a){"use strict";var s=a("1aa8"),n=a.n(s);n.a},"3a4c":function(t,e,a){},"50be":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("AppNavbar"),a("router-view")],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[a("b-navbar-brand",{attrs:{to:"/"}},[t._v("OISM")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),a("b-nav-item",{attrs:{to:"/tasklist"}},[t._v("Tasks")]),a("b-nav-item",{attrs:{to:"/datanorm"}},[t._v("Vendor Mgmt")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn,expression:"loggedIn"}]},[t._v(t._s(t.userObj.displayName)+" ")]),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn,expression:"loggedIn"}]},[t._v(t._s(t.userObj.email)+" ")]),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!t.loggedIn,expression:"!loggedIn"}],attrs:{to:"/login"}},[t._v("Login")]),a("b-nav-item-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn,expression:"loggedIn"}],attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("em",[t._v("User")])]},proxy:!0}])},[a("b-dropdown-item",{attrs:{to:"/userview"}},[t._v("Profile")]),a("b-dropdown-item",{attrs:{to:"/admin"}},[t._v("Admin")]),a("b-dropdown-item",{on:{click:function(e){return t.onLogout()}}},[t._v("Sign Out")])],1)],1)],1)],1)],1)},i=[],l=a("bc3a"),c=a.n(l),u=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",[t._v("Login")]),a("b-alert",{attrs:{variant:"warning"},model:{value:t.showLoginFailedAlert,callback:function(e){t.showLoginFailedAlert=e},expression:"showLoginFailedAlert"}},[t._v("Username or Password wrong")]),a("b-form",{directives:[{name:"show",rawName:"v-show",value:!t.loggedIn,expression:"!loggedIn"}],on:{submit:t.onSubmit}},[a("b-form-input",{attrs:{type:"text",placeholder:"Username"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),a("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loggedIn,expression:"loggedIn"}]},[t._v(" Already logged in ")])],1)},m=[],f={name:"Login",data:function(){return{user:"test",password:"456",showLoginFailedAlert:!1}},computed:{loggedIn:function(){return this.$store.getters.loggedIn}},methods:{onSubmit:function(t){var e=this;t.preventDefault();var a={email:this.user,password:this.password};c.a.post("/api/auth/login",a).then((function(t){e.$log.debug("Logged in"),e.$log.debug(t.data),e.$store.commit("setUserObj",t.data),rt.push("/")})).catch((function(t){e.$log.error("Cannot log in "+t),e.showLoginFailedAlert=!0}))}},mounted:function(){}},b=f,p=(a("84e2"),a("2877")),v=Object(p["a"])(b,d,m,!1,null,"5e83bb8d",null),h=v.exports,g=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h2",[t._v("So ne Webseite")])])}],y={name:"HelloWorld",props:{msg:String}},w=y,_=(a("cf91"),Object(p["a"])(w,g,k,!1,null,"2f7c4932",null)),$=_.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",[t._v("Tasklist")]),a("b-table",{attrs:{items:t.getActiveTasks,fields:t.activefields,busy:t.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return t.onOpen(e.item)}}},[t._v("Open")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return t.onArchiveChange(e.item,!0)}}},[t._v("Archive")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.onDeleteTask(e.item,t.$evt)}}},[t._v("Delete")])]}}])}),a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.showModal=!0}}},[t._v("Create Task")]),a("br"),a("br"),a("br"),a("br"),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}]},[t._v("Archive")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[a("b-card",{attrs:{fluid:""}},[a("p",{staticClass:"col-xs-1",attrs:{align:"center"}},[a("b-table",{staticClass:"table",attrs:{align:"center",items:t.getInactiveTasks,fields:t.archivefields,striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return t.onOpen(e.item)}}},[t._v("Open")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return t.onArchiveChange(e.item,!0)}}},[t._v("Archive")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.onDeleteTask(e.item,t.$evt)}}},[t._v("Delete")])]}}])})],1)])],1),a("b-modal",{attrs:{title:"Create Task"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:t.onCreateTask}},[a("b-form-input",{attrs:{type:"text",placeholder:"Taskname"},model:{value:t.createTaskName,callback:function(e){t.createTaskName=e},expression:"createTaskName"}}),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)],1)},C=[],T=(a("4de4"),{name:"TaskList",data:function(){return{showModal:!1,createTaskName:"",isBusy:!1,activefields:[{key:"taskName",label:"Task Name"},{key:"assignee",label:"Assignee"},{key:"status",label:"Status"},{key:"actions",label:"Actions"}],archivefields:[{key:"taskName",label:"Task Name"},{key:"actions",label:"Actions"}],tasks:[]}},computed:{getActiveTasks:function(){return this.tasks.filter((function(t){return!t.isArchived}))},getInactiveTasks:function(){return this.tasks.filter((function(t){return t.isArchived}))}},methods:{onOpen:function(t){rt.push({name:"TaskView",params:{taskId:t._id}})},onArchiveChange:function(t,e){var a=this;t.isArchived=e,this.$log.error(this.tasks);var s={task:t};c.a.post("/api/tasks/"+t._id,s).then((function(t){a.$log.debug("save okay "+t),a.$bvToast.toast("Everything is good",{title:"Task saved",solid:!0}),a.refreshTable()})).catch((function(t){a.$log.error("update task fail "+t),a.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTask:function(t){var e=this;t.preventDefault();var a={taskName:this.createTaskName};c.a.post("/api/tasks/",a).then((function(t){e.$log.debug("create okay "+t.status),e.showModal=!1,e.createTaskName="",e.refreshTable()})).catch((function(t){e.$log.error("create task fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onDeleteTask:function(t,e){var a=this;c.a.delete("/api/tasks/"+t._id).then((function(t){a.$log.debug("delete okay "+t.status),a.refreshTable()})).catch((function(t){a.$log.error("delete task fail "+t),a.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})})),this.refreshTable(),e.target.blur()},refreshTable:function(){var t=this;this.isBusy=!0,c.a.get("/api/tasks/").then((function(e){t.$log.debug("Tasks"),t.$log.debug(e.data),t.tasks=e.data.tasks})).catch((function(e){t.$log.error("get taskview fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),this.isBusy=!1}},mounted:function(){this.refreshTable()}}),x=T,A=(a("e922"),Object(p["a"])(x,I,C,!1,null,"0fc7ece0",null)),O=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",{staticClass:"text-center"},[t._v("TaskView")]),a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{label:"Task Name","label-for":"taskInput"}},[a("b-form-input",{attrs:{id:"taskInput",type:"text"},model:{value:t.taskObj.taskName,callback:function(e){t.$set(t.taskObj,"taskName",e)},expression:"taskObj.taskName"}})],1),a("b",[t._v("Items")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[t._v("Article Id")]),a("div",{staticClass:"col-3"},[t._v("Description")]),a("div",{staticClass:"col-3"},[t._v("Amount")]),a("div",{staticClass:"col-3"},[t._v("Vendor")])]),t._l(t.taskObj.items,(function(e,s){return a("div",{key:e._id,staticClass:"row pl-2 pb-1",attrs:{index:s}},[a("b-form-input",{staticClass:"col-3 addPadding",attrs:{id:"articleId",type:"text"},model:{value:e.articleId,callback:function(a){t.$set(e,"articleId",a)},expression:"row.articleId"}}),a("b-form-input",{staticClass:"col-3",attrs:{id:"description",type:"text"},model:{value:e.description,callback:function(a){t.$set(e,"description",a)},expression:"row.description"}}),a("b-form-input",{staticClass:"col-3",attrs:{id:"amount",type:"text"},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"row.amount"}}),a("b-form-input",{staticClass:"col-2",attrs:{id:"vendor",type:"text"},model:{value:e.vendor,callback:function(a){t.$set(e,"vendor",a)},expression:"row.vendor"}}),a("b-button",{staticClass:"col-1",on:{click:function(e){return t.onDeleteArticle(s)}}},[t._v("X")])],1)})),a("b-button",{attrs:{variant:"primary"},on:{click:t.onAddArticle}},[t._v("Add Item")]),a("b-button",{attrs:{variant:"primary ml-2"},on:{click:function(e){t.showSearchModal=!0}}},[t._v("Search Item")]),a("br"),a("b",[t._v("Work Time Stuff")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[t._v("Worker")]),a("div",{staticClass:"col-4"},[t._v("Worker Time")])]),t._l(t.taskObj.workTime,(function(e,s){return a("div",{key:e._id,staticClass:"row pl-2 pb-1",attrs:{index:s}},[a("b-form-input",{staticClass:"col-4",attrs:{id:"worker",type:"text"},model:{value:e.worker,callback:function(a){t.$set(e,"worker",a)},expression:"row.worker"}}),a("b-form-input",{staticClass:"col-4",attrs:{id:"time",type:"text"},model:{value:e.time,callback:function(a){t.$set(e,"time",a)},expression:"row.time"}}),a("b-button",{staticClass:"col-1 ml-2",on:{click:function(e){return t.onDeleteWorkTimeItem(s)}}},[t._v("X")])],1)})),a("b-button",{attrs:{variant:"primary"},on:{click:t.onAddWorkTimeItem}},[t._v("Add Work Item")]),a("b-form-group",{attrs:{label:"Drive Info","label-for":"driveInfo"}},[a("b-form-input",{attrs:{id:"driveInfo",type:"text"},model:{value:t.taskObj.driveInfo,callback:function(e){t.$set(t.taskObj,"driveInfo",e)},expression:"taskObj.driveInfo"}})],1),a("b-form-group",{attrs:{label:"Hotel Info","label-for":"hotelInfo"}},[a("b-form-input",{attrs:{id:"hotelInfo",type:"text"},model:{value:t.taskObj.hotelInfo,callback:function(e){t.$set(t.taskObj,"hotelInfo",e)},expression:"taskObj.hotelInfo"}})],1),a("b-form-group",{attrs:{label:"Comments","label-for":"comments"}},[a("b-form-input",{attrs:{id:"comments",type:"text"},model:{value:t.taskObj.comments,callback:function(e){t.$set(t.taskObj,"comments",e)},expression:"taskObj.comments"}})],1),a("b-form-group",{attrs:{label:"Status","label-for":"status"}},[a("b-form-input",{attrs:{id:"status",type:"text"},model:{value:t.taskObj.status,callback:function(e){t.$set(t.taskObj,"status",e)},expression:"taskObj.status"}})],1),a("b-form-group",{attrs:{label:"Assignee","label-for":"assignee"}},[a("b-form-input",{attrs:{id:"assignee",type:"text"},model:{value:t.taskObj.assignee,callback:function(e){t.$set(t.taskObj,"assignee",e)},expression:"taskObj.assignee"}})],1),a("br"),a("b-button",{staticClass:"mx-auto",attrs:{type:"Save",variant:"primary"}},[t._v("Save")])],2),a("small",[t._v(t._s(t.taskObj.taskId))]),a("b-modal",{attrs:{size:"xl",scrollable:"",title:"Search"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:t.showSearchModal,callback:function(e){t.showSearchModal=e},expression:"showSearchModal"}},[a("b-container",{attrs:{fluid:""}},[a("ArticleSearch",{on:{"add-item":function(e){return t.onAddItemCallback(e)}}})],1)],1)],1)},j=[],U=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"search"}},[t._v(" Search comp "),a("b-form",{staticClass:"form-inline",on:{submit:t.onSearch}},[a("b-form-input",{staticClass:"col-md-9",attrs:{state:t.queryState,autofocus:""},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("div",{staticClass:"col-md-3"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1),a("b-table",{attrs:{"font-size":"8",size:"sm",items:t.searchResults,fields:t.fields,"head-variant":"light"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return t.onAdd(e.item)}}},[t._v("Select")])]}}])})],1)}),D=[],N={name:"ArticleSearch",props:{},data:function(){return{fields:[{key:"articleId",label:"ID"},{key:"description1",label:"Description 1"},{key:"description2",label:"Description 2"},{key:"price",label:"Price in €"},{key:"actions",label:"Actions"}],searchQuery:"",searchResults:[]}},computed:{queryState:function(){return this.searchQuery.length>3}},methods:{onAdd:function(t){console.log(t),this.$emit("add-item",t)},onSearch:function(t){var e=this;t.preventDefault(),console.log("onSearch"),c.a.get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(t){e.$log.info("search okay "),e.$log.debug(t.data.articles),e.searchResults=t.data.articles})).catch((function(t){e.$log.error("fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))}}},E=N,M=(a("695d"),Object(p["a"])(E,U,D,!1,null,"30b0f4de",null)),P=M.exports,L={name:"TaskList",props:{taskId:{type:String}},components:{ArticleSearch:P},data:function(){return{taskObj:{},showSearchModal:!1}},methods:{onSubmit:function(t){var e=this;t.preventDefault();var a={task:this.taskObj};c.a.post("/api/tasks/"+this.taskId,a).then((function(t){e.$log.debug("save okay "+t),e.$bvToast.toast("Everything is good",{title:"Task saved",solid:!0})})).catch((function(t){e.$log.error("create task fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onAddArticle:function(){this.taskObj.items.push({articleId:"",description:"",amount:0,vendor:""})},onDeleteArticle:function(t){this.taskObj.items.splice(t,1)},onAddWorkTimeItem:function(){this.taskObj.workTime.push({worker:"",time:0})},onDeleteWorkTimeItem:function(t){this.taskObj.workTime.splice(t,1)},onAddItemCallback:function(t){var e=this;this.$log.debug(t),this.showSearchModal=!1,c.a.get("/api/vendors/"+t.vendorRef).then((function(a){e.$log.debug("get vendor "),e.$log.debug(a),e.taskObj.items.push({articleId:t.articleId,description:t.description1+t.description2,amount:1,vendor:a.data.vendor.uploadName})})).catch((function(t){e.$log.error("create task fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))}},mounted:function(){var t=this;console.log(this.$route.params),console.log(JSON.stringify(this.taskId)),""!==this.taskId?(this.$log.debug(this.taskId),c.a.get("api/tasks/"+this.taskId).then((function(e){t.$log.debug(e),t.taskObj=e.data.task})).catch((function(e){t.$log.error("get task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))):rt.push("/")}},z=L,V=(a("17a0"),Object(p["a"])(z,S,j,!1,null,"5aa6c29f",null)),Q=V.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",[t._v("User")]),t._v(" "+t._s(this.userObj)+" ")])},B=[],R={name:"UserView",data:function(){return{}},computed:{userObj:function(){return this.$store.state.userObj}},methods:{},mounted:function(){}},F=R,G=(a("f5b0"),Object(p["a"])(F,W,B,!1,null,"04a8444d",null)),q=G.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",[t._v("User Mgmt")]),a("b-table",{attrs:{items:t.users,fields:t.userfields,busy:t.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(isGlobalAdmin)",fn:function(e){return[a("b-checkbox",{attrs:{disabled:""},model:{value:e.item.isGlobalAdmin,callback:function(a){t.$set(e.item,"isGlobalAdmin",a)},expression:"row.item.isGlobalAdmin"}})]}},{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return t.onEditUser(e.item)}}},[t._v("Edit")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.onDeleteUser(e.item,t.$evt)}}},[t._v("Delete")])]}}])}),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(e){t.showUserModal=!0,t.mode="create"}}},[t._v("Create User")]),a("br"),a("h2",[t._v("Company Mgmt")]),a("b-table",{attrs:{items:t.tenants,fields:t.tenantfields,busy:t.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return t.onEditTenant(e.item)}}},[t._v("Edit")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.onDeleteTenant(e.item)}}},[t._v("Delete")])]}}])}),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(e){t.showTenantModal=!0}}},[t._v("Create Company")]),a("b-modal",{attrs:{title:"Create/Edit User"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:t.showUserModal,callback:function(e){t.showUserModal=e},expression:"showUserModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:t.onCreateOrEditUser}},[a("b-form-input",{attrs:{type:"text",placeholder:"Display Name"},model:{value:t.newUserDisplayName,callback:function(e){t.newUserDisplayName=e},expression:"newUserDisplayName"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Email"},model:{value:t.newUserMail,callback:function(e){t.newUserMail=e},expression:"newUserMail"}}),a("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:t.newUserPassword,callback:function(e){t.newUserPassword=e},expression:"newUserPassword"}}),a("b-form-checkbox",{attrs:{type:"checkbox"},model:{value:t.newUserAdmin,callback:function(e){t.newUserAdmin=e},expression:"newUserAdmin"}},[t._v("Admin")]),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1),a("b-modal",{attrs:{title:"Create Company"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:t.showTenantModal,callback:function(e){t.showTenantModal=e},expression:"showTenantModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:t.onCreateTenant}},[a("b-form-input",{attrs:{type:"text",placeholder:"Company ID"},model:{value:t.newCompanyID,callback:function(e){t.newCompanyID=e},expression:"newCompanyID"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Company Name"},model:{value:t.newCompanyName,callback:function(e){t.newCompanyName=e},expression:"newCompanyName"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Owner ID"},model:{value:t.newCompanyOwner,callback:function(e){t.newCompanyOwner=e},expression:"newCompanyOwner"}}),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)],1)},J=[],X=(a("2ca0"),{name:"AdminView",data:function(){return{showTenantModal:!1,newCompanyID:"",newCompanyName:"",newCompanyOwner:"",showUserModal:!1,mode:"create",editId:"",newUserDisplayName:"",newUserMail:"",newUserPassword:"",newUserAdmin:Boolean,isBusy:!1,userfields:[{key:"id",label:"ID"},{key:"displayName",label:"Display Name"},{key:"email",label:"Email"},{key:"isGlobalAdmin",label:"Admin"},{key:"assingedTennants",label:"assingedTennants"},{key:"isTennantAdmin",label:"isTennantAdmin"},{key:"actions",label:"Actions"}],tenantfields:[{key:"tenantId",label:"ID"},{key:"companyName",label:"Name"},{key:"tenantOwner",label:"Owner"},{key:"actions",label:"Actions"}],users:[],tenants:[]}},computed:{},methods:{onCreateOrEditUser:function(t){var e=this;t.preventDefault();var a={user:this.newUserDisplayName,email:this.newUserMail,pw:this.newUserPassword,isGlobalAdmin:this.newUserAdmin};"create"===this.mode?c.a.post("/api/users/",a).then((function(t){e.$log.debug("create okay "+t.status),e.clearUserModel()})).catch((function(t){e.$log.error("create fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})})):(a.pw.startsWith("$2b")&&delete a.pw,c.a.post("/api/users/"+this.editId,a).then((function(t){e.$log.debug("udapte okay "+t.status),e.clearUserModel()})).catch((function(t){e.$log.error("udapte fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})})))},clearUserModel:function(){this.showUserModal=!1,this.newUserDisplayName="",this.newUserMail="",this.newUserPassword="",this.editId="",this.refreshTables()},onEditUser:function(t){this.mode="edit",this.newUserDisplayName=t.displayName,this.newUserMail=t.email,this.newUserPassword=t.password,this.newUserAdmin=t.isGlobalAdmin,this.editId=t.id,this.showUserModal=!0},onDeleteUser:function(t){var e=this;c.a.delete("/api/users/"+t.id).then((function(t){e.$log.debug("delete okay "+t.status),e.refreshTables()})).catch((function(t){e.$log.error("delete fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTenant:function(t){var e=this;t.preventDefault();var a={tenId:this.newCompanyID,companyName:this.newCompanyName,tenantOwner:this.newCompanyOwner};c.a.post("/api/tenants/",a).then((function(t){e.$log.debug("create okay "+t.status),e.showTenantModal=!1,e.newCompanyID="",e.newCompanyName="",e.newCompanyOwner="",e.refreshTables()})).catch((function(t){e.$log.error("create fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onEditTenant:function(t){this.newCompanyName=t.companyName},onDeleteTenant:function(t){var e=this;console.log(t),c.a.delete("/api/tenants/"+t.tenantId).then((function(t){e.$log.debug("delete okay "+t.status),e.refreshTables()})).catch((function(t){e.$log.error("delete fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var t=this;this.isBusy=!0,c.a.get("/api/users/").then((function(e){t.$log.debug("Users"),t.$log.debug(e.data),t.users=e.data.users})).catch((function(e){t.$log.error("get users fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),c.a.get("/api/tenants/").then((function(e){t.$log.debug("Tenants"),t.$log.debug(e.data),t.tenants=e.data.tenants})).catch((function(e){return t.handleAPIError(e)})),this.isBusy=!1},handleAPIError:function(t){this.$log.error("api call fail "+t),this.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}},mounted:function(){this.refreshTables()}}),Y=X,K=(a("da32"),Object(p["a"])(Y,H,J,!1,null,"17c26c1e",null)),Z=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("h2",[t._v("Datanorm")]),a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Datanorm datanorm.001 Input name:","label-for":"input-1"}},[a("b-form-input",{attrs:{state:t.nameState,placeholder:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Datanorm File:","label-for":"file"}},[a("b-form-file",{attrs:{state:Boolean(t.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),a("h2",[t._v("Current Vendors")]),t._l(t.vendorList,(function(e){return a("div",{key:e._id,staticClass:"row pl-2 pb-1"},[t._v(" "+t._s(e.vendorId)+" ## "+t._s(e.file)+" ## "+t._s(e.uploadName)+" ## "+t._s(e.articles.length)+" ## "),a("b-button",{attrs:{variant:"danger",disabled:!0},on:{click:function(a){return t.onDelete(e._id)}}},[t._v("Delete")])],1)})),a("h2",[t._v("Search")]),a("b-form",{staticClass:"form-inline",on:{submit:t.onSearch}},[a("b-form-input",{staticClass:"col-8",attrs:{state:t.queryState},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),t._l(t.searchResults,(function(e){return a("div",{key:e._id,staticClass:"row pl-2 pb-1"},[t._v(" "+t._s(e.articleId)+" ## "+t._s(e.description1)+" ## "+t._s(e.description2)+" ## "+t._s(e.price)+" € ")])})),a("ArticleSearch",{on:{"add-item":function(e){return t.onAddItemCallback(e)}}})],2)},et=[],at=(a("b0c0"),{name:"DatanormView",components:{ArticleSearch:P},data:function(){return{name:"test",file:null,vendorList:{},searchQuery:"",searchResults:[]}},computed:{nameState:function(){return this.name.length>0},queryState:function(){return this.searchQuery.length>3}},methods:{onAddItemCallback:function(t){this.$log.debug(t)},onSubmit:function(t){var e=this;t.preventDefault();var a=new FormData;a.append("name",this.name),a.append("file",this.file),c.a.post("/api/vendors/uploadDatanorm",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$log.debug("Upload done"),e.$log.debug(t.data),e.$bvToast.toast("Yipii",{title:"Upload complete",variant:"success",solid:!0})})).catch((function(t){e.$log.error("Cannot upload "+t),e.showLoginFailedAlert=!0}))},onDelete:function(t){console.log(t)},onSearch:function(t){var e=this;t.preventDefault(),console.log("onSearch"),c.a.get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(t){e.$log.info("search okay "),e.$log.debug(t.data.articles),e.searchResults=t.data.articles,e.$bvToast.toast("ok",{title:"Delete",solid:!0})})).catch((function(t){e.$log.error("fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var t=this;c.a.get("/api/vendors/").then((function(e){t.$log.debug("Vendors"),t.$log.debug(e.data),t.vendorList=e.data.vendors})).catch((function(e){t.$log.error("get users fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}},mounted:function(){this.refreshTables()}}),st=at,nt=(a("2814"),Object(p["a"])(st,tt,et,!1,null,"fd035258",null)),ot=nt.exports;s["default"].use(u["a"]);var rt=new u["a"]({mode:"history",routes:[{path:"/",name:"HelloWorld",component:$},{path:"/login",name:"Login",component:h},{path:"/tasklist",name:"Tasklist",component:O},{path:"/task/:id",name:"TaskView",component:Q,props:!0},{path:"/userview",name:"UserView",component:q},{path:"/admin",name:"AdminView",component:Z},{path:"/datanorm",name:"DatanormView",component:ot}]}),it={name:"AppNavbar",props:{msg:String},data:function(){return{}},computed:{loggedIn:function(){return this.$store.getters.loggedIn},userObj:function(){return this.$store.state.userObj?this.$store.state.userObj:{}}},methods:{onLogout:function(){var t=this;c.a.post("/api/auth/logout").then((function(e){t.$log.debug("Logged off"),t.$log.debug(e),t.$store.commit("setUserObj",null),rt.push("/")})).catch((function(e){t.$log.error("Cannot log off"+e)}))}},mounted:function(){var t=this;c.a.get("/api/auth/loginCheck").then((function(e){t.$log.debug("Existing session found!"),t.$log.debug(e.data),t.$store.commit("setUserObj",e.data)}))}},lt=it,ct=(a("38f6"),Object(p["a"])(lt,r,i,!1,null,"57b886f6",null)),ut=ct.exports,dt={name:"app",components:{AppNavbar:ut},created:function(){document.title="OISM!"}},mt=dt,ft=(a("034f"),Object(p["a"])(mt,n,o,!1,null,null,null)),bt=ft.exports,pt=a("5f5b"),vt=a("b1e0"),ht=(a("f9e3"),a("2dd8"),a("498a")),gt=a("dbbe"),kt=a("a7e2"),yt=a("f9bc"),wt=a("2f62");s["default"].use(wt["a"]);var _t=!1,$t=new wt["a"].Store({state:{userObj:null},getters:{loggedIn:function(t){return null!=t.userObj}},mutations:{increment:function(t,e){t.count+=e},setUserObj:function(t,e){t.userObj=e}},strict:_t}),It=a("85ff"),Ct=a.n(It),Tt=!0;s["default"].config.productionTip=Tt,s["default"].config.devtools=!Tt,s["default"].use(pt["a"]),s["default"].use(vt["a"]),s["default"].use(ht["a"]),s["default"].use(gt["a"]),s["default"].use(kt["a"]),s["default"].use(yt["a"]),c.a.defaults.baseURL="http://localhost:3000",c.a.defaults.withCredentials=!0,s["default"].use(Ct.a,{isEnabled:!0,logLevel:Tt?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0}),new s["default"]({router:rt,store:$t,render:function(t){return t(bt)}}).$mount("#app")},"5e03":function(t,e,a){},"5e85":function(t,e,a){},6377:function(t,e,a){},"695d":function(t,e,a){"use strict";var s=a("3227"),n=a.n(s);n.a},"7ba5":function(t,e,a){},"84e2":function(t,e,a){"use strict";var s=a("50be"),n=a.n(s);n.a},"85ec":function(t,e,a){},cf91:function(t,e,a){"use strict";var s=a("5e85"),n=a.n(s);n.a},da32:function(t,e,a){"use strict";var s=a("efd5"),n=a.n(s);n.a},e922:function(t,e,a){"use strict";var s=a("7ba5"),n=a.n(s);n.a},efd5:function(t,e,a){},f5b0:function(t,e,a){"use strict";var s=a("3a4c"),n=a.n(s);n.a}});
//# sourceMappingURL=app.c83fda65.js.map
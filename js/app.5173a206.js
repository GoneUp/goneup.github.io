(function(){var e={661:function(e,t,a){"use strict";var s=a(9812),l=a(6252);const o={id:"app"};function n(e,t,a,s,n,i){const r=(0,l.up)("AppNavbar"),d=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(r),(0,l.Wm)(d)])}var i=a(3577),r=a(9963);const d=e=>((0,l.dD)("data-v-6d7d8a69"),e=e(),(0,l.Cn)(),e),u={id:"main"},m=(0,l.Uk)("Login"),c=d((()=>(0,l._)("em",null,"User",-1))),h=(0,l.Uk)("Admin");function p(e,t,a,s,o,n){const d=(0,l.up)("b-navbar-brand"),p=(0,l.up)("b-navbar-toggle"),b=(0,l.up)("b-nav-item"),g=(0,l.up)("b-navbar-nav"),w=(0,l.up)("b-dropdown-item"),f=(0,l.up)("b-nav-item-dropdown"),k=(0,l.up)("b-collapse"),v=(0,l.up)("b-navbar");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(v,{toggleable:"lg",type:"dark",variant:"info"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.title")),1)])),_:1}),(0,l.Wm)(p,{target:"nav-collapse"}),(0,l.Wm)(k,{id:"nav-collapse","is-nav":""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{exact:"","exact-active-class":"active",to:"/tasklist"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("nav.tasks")),1)])),_:1}),(0,l.Wm)(b,{exact:"","exact-active-class":"active",to:"/datanorm"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("nav.vendor_mgmt")),1)])),_:1})])),_:1}),(0,l.Wm)(g,{class:"ml-auto"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(n.userObj.displayName),1)])),_:1},512),[[r.F8,n.loggedIn]]),(0,l.wy)((0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(n.userObj.email),1)])),_:1},512),[[r.F8,n.loggedIn]]),(0,l.wy)((0,l.Wm)(b,{to:"/login"},{default:(0,l.w5)((()=>[m])),_:1},512),[[r.F8,!n.loggedIn]]),(0,l.wy)((0,l.Wm)(f,{right:""},{"button-content":(0,l.w5)((()=>[c])),default:(0,l.w5)((()=>[(0,l.Wm)(w,{to:"/userview"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("nav.profile")),1)])),_:1}),(0,l.Wm)(w,{to:"/admin"},{default:(0,l.w5)((()=>[h])),_:1}),(0,l.Wm)(w,{onClick:t[0]||(t[0]=e=>n.onLogout())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("nav.sign_out")),1)])),_:1})])),_:1},512),[[r.F8,n.loggedIn]])])),_:1})])),_:1})])),_:1})])}a(7658);var b=a(9669),g=a.n(b),w=a(2201);const f=e=>((0,l.dD)("data-v-2ace275a"),e=e(),(0,l.Cn)(),e),k={id:"main"},v=f((()=>(0,l._)("h2",null,"Login",-1)));function _(e,t,a,s,o,n){const d=(0,l.up)("b-alert"),u=(0,l.up)("b-form-input"),m=(0,l.up)("b-button"),c=(0,l.up)("b-form");return(0,l.wg)(),(0,l.iD)("div",k,[v,(0,l.Wm)(d,{modelValue:o.showLoginFailedAlert,"onUpdate:modelValue":t[0]||(t[0]=e=>o.showLoginFailedAlert=e),variant:"warning"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("login.userorpwwrong")),1)])),_:1},8,["modelValue"]),(0,l.wy)((0,l.Wm)(c,{onSubmit:n.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.user,"onUpdate:modelValue":t[1]||(t[1]=e=>o.user=e),type:"text",placeholder:"Username"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.password,"onUpdate:modelValue":t[2]||(t[2]=e=>o.password=e),type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,l.Wm)(m,{type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])),_:1},8,["onSubmit"]),[[r.F8,!n.loggedIn]]),(0,l.wy)((0,l._)("div",null," Already logged in ",512),[[r.F8,n.loggedIn]])])}var y={name:"Login",data(){return{user:"",password:"",showLoginFailedAlert:!1}},computed:{loggedIn(){return this.$store.getters.loggedIn}},methods:{onSubmit(e){e.preventDefault();let t={email:this.user,password:this.password};g().post("/api/auth/login",t).then((e=>{this.$log.debug("Logged in"),this.$log.debug(e.data),this.$store.commit("setUserObj",e.data),wt.push("/")})).catch((e=>{this.$log.error("Cannot log in "+e),this.showLoginFailedAlert=!0}))}},mounted(){this.$store.state.isProduction||(this.user="admin",this.password="admin")}},$=a(3744);const U=(0,$.Z)(y,[["render",_],["__scopeId","data-v-2ace275a"]]);var V=U;const W=e=>((0,l.dD)("data-v-4b6c6562"),e=e(),(0,l.Cn)(),e),T={class:"hello"},I={class:"locale-changer"},A=["value"],C=W((()=>(0,l._)("p",{class:"bottom-align-text center"},"Â© Henry ðŸš€ðŸš€ðŸš€",-1)));function D(e,t,a,s,o,n){return(0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("h2",null,(0,i.zw)(e.$t("common.welcome")),1),(0,l._)("p",null,(0,i.zw)(e.$t("common.changelanguage")),1),(0,l._)("div",I,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.$i18n.locale=t)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.langs,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:`Lang${t}`,value:e},(0,i.zw)(e),9,A)))),128))],512),[[r.bM,e.$i18n.locale]])]),C])}var O={name:"HelloWorld",props:{msg:String},data(){return{langs:["en","de"]}}};const z=(0,$.Z)(O,[["render",D],["__scopeId","data-v-4b6c6562"]]);var S=z;const x=e=>((0,l.dD)("data-v-022d94a8"),e=e(),(0,l.Cn)(),e),N={id:"main"},j=x((()=>(0,l._)("br",null,null,-1))),P=x((()=>(0,l._)("br",null,null,-1))),E=x((()=>(0,l._)("br",null,null,-1))),M=x((()=>(0,l._)("br",null,null,-1))),L={class:"col-xs-1",align:"center"},F=x((()=>(0,l._)("div",null,null,-1)));function R(e,t,a,s,o,n){const r=(0,l.up)("b-button"),d=(0,l.up)("b-table"),u=(0,l.up)("b-card"),m=(0,l.up)("b-collapse"),c=(0,l.up)("b-form-input"),h=(0,l.up)("b-form"),p=(0,l.up)("b-container"),b=(0,l.up)("b-modal"),g=(0,l.Q2)("b-toggle");return(0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("h2",null,(0,i.zw)(e.$t("tasks.tasklist")),1),(0,l.Wm)(d,{items:n.getActiveTasks,fields:o.activefields,busy:o.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(createdAt)":(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)(new Date(e.item.createdAt).toLocaleString()),1)])),"cell(actions)":(0,l.w5)((t=>[(0,l.Wm)(r,{size:"sm",onClick:e=>n.onOpen(t.item),class:"mr-2",variant:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.open")),1)])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:e=>n.onArchiveChange(t.item,!0),class:"mr-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.archive")),1)])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:a=>n.onDeleteTask(t.item,e.$evt),class:"mr-2",variant:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["items","fields","busy"]),(0,l.Wm)(r,{variant:"primary",size:"sm",onClick:t[0]||(t[0]=e=>o.showModal=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("tasks.create_task")),1)])),_:1}),j,P,E,M,(0,l.wy)(((0,l.wg)(),(0,l.j4)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.archive")),1)])),_:1})),[[g,void 0,void 0,{"collapse-1":!0}]]),(0,l.Wm)(m,{id:"collapse-1",class:"mt-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{fluid:""},{default:(0,l.w5)((()=>[(0,l._)("p",L,[(0,l.Wm)(d,{class:"table",align:"center",items:n.getInactiveTasks,fields:o.archivefields,striped:"",hover:"",responsive:"sm"},{"cell(actions)":(0,l.w5)((t=>[(0,l.Wm)(r,{size:"sm",onClick:e=>n.onOpen(t.item),class:"mr-2",variant:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.open")),1)])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:e=>n.onArchiveChange(t.item,!0),class:"mr-2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.archive")),1)])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:a=>n.onDeleteTask(t.item,e.$evt),class:"mr-2",variant:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["items","fields"])])])),_:1})])),_:1}),(0,l.Wm)(b,{modelValue:o.showModal,"onUpdate:modelValue":t[2]||(t[2]=e=>o.showModal=e),title:e.$t("tasks.create_task")},{"modal-footer":(0,l.w5)((()=>[F])),default:(0,l.w5)((()=>[(0,l.Wm)(p,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{onSubmit:n.onCreateTask},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:o.createTaskName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.createTaskName=e),type:"text",placeholder:e.$t("tasks.task_name")},null,8,["modelValue","placeholder"]),(0,l.Wm)(r,{center:"",type:"submit",variant:"primary",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue","title"])])}function Z(e,t){t.getters.loggedIn||(console.log("goto login"),e.push("Login"))}var B={name:"TaskList",data(){return{showModal:!1,createTaskName:"",isBusy:!1,activefields:[{key:"createdAt",label:this.$t("tasks.created"),sortable:!0},{key:"taskName",label:this.$t("tasks.task_name"),sortable:!0},{key:"customerName",label:this.$t("tasks.customer"),sortable:!0},{key:"assignee",label:this.$t("tasks.assignee"),sortable:!0},{key:"status",label:this.$t("tasks.status"),sortable:!0},{key:"actions",label:this.$t("common.actions")}],archivefields:[{key:"taskName",label:this.$t("tasks.task_name")},{key:"actions",label:this.$t("common.actions")}],tasks:[]}},computed:{getActiveTasks(){return this.tasks.filter((e=>!e.isArchived))},getInactiveTasks(){return this.tasks.filter((e=>e.isArchived))}},methods:{onOpen(e){wt.push({name:"TaskView",params:{taskId:e._id}})},onArchiveChange(e,t){e.isArchived=t,this.$log.error(this.tasks);const a={task:e};g().post("/api/tasks/"+e._id,a).then((e=>{this.$log.debug("save okay "+e),this.$bvToast.toast("Everything is good",{title:this.$t("tasks.task_saved"),solid:!0}),this.refreshTable()})).catch((e=>{this.$log.error("update task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTask(e){e.preventDefault();const t={taskName:this.createTaskName};g().post("/api/tasks/",t).then((e=>{this.$log.debug("create okay "+e.status),this.showModal=!1,this.createTaskName="",this.refreshTable()})).catch((e=>{this.$log.error(e),this.$log.error("create task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onDeleteTask(e,t){g()["delete"]("/api/tasks/"+e._id).then((e=>{this.$log.debug("delete okay "+e.status),this.refreshTable()})).catch((e=>{this.$log.error("delete task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),this.refreshTable(),t.target.blur()},refreshTable(){this.isBusy=!0,g().get("/api/tasks/").then((e=>{this.$log.debug("Tasks"),this.$log.debug(e.data),this.tasks=e.data.tasks})).catch((e=>{401!=e.response.status&&(this.$log.error("get taskview fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0}))})),this.isBusy=!1}},beforeMount(){Z(this.$router,this.$store)},mounted(){this.refreshTable()}};const Q=(0,$.Z)(B,[["render",R],["__scopeId","data-v-022d94a8"]]);var H=Q;const G=e=>((0,l.dD)("data-v-380301d3"),e=e(),(0,l.Cn)(),e),K={id:"main"},Y={class:"text-center"},q=G((()=>(0,l._)("hr",null,null,-1))),J={class:"row"},X={class:"col-2"},ee={class:"col-4"},te={class:"col-1"},ae={class:"col-2"},se={class:"col-3"},le=["index"],oe=(0,l.Uk)("X"),ne=G((()=>(0,l._)("br",null,null,-1))),ie={class:"row"},re={class:"col-3"},de={class:"col-2"},ue={class:"col-2"},me=["index"],ce=(0,l.Uk)("X"),he=G((()=>(0,l._)("hr",null,null,-1))),pe=G((()=>(0,l._)("hr",null,null,-1))),be=G((()=>(0,l._)("br",null,null,-1))),ge={class:"mx-auto"},we=G((()=>(0,l._)("div",null,null,-1)));function fe(e,t,a,s,o,n){const r=(0,l.up)("b-form-input"),d=(0,l.up)("b-form-group"),u=(0,l.up)("b-button"),m=(0,l.up)("b-form-textarea"),c=(0,l.up)("b-form-select"),h=(0,l.up)("b-row"),p=(0,l.up)("b-form"),b=(0,l.up)("ArticleSearch"),g=(0,l.up)("b-container"),w=(0,l.up)("b-modal");return(0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("h2",Y,(0,i.zw)(e.$t("tasks.taskview")),1),(0,l.Wm)(p,{onSubmit:n.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:e.$t("tasks.task_name"),"label-cols-md":"2","label-cols-sm":"3","label-class":"taskLabel","label-for":"taskInput"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"taskInput",modelValue:o.taskObj.taskName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.taskObj.taskName=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("tasks.customer"),"label-cols-md":"2","label-cols-sm":"3","label-for":"costumerName"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"costumerName",modelValue:o.taskObj.customerName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.taskObj.customerName=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),q,(0,l._)("b",null,(0,i.zw)(e.$t("tasks.items")),1),(0,l._)("div",J,[(0,l._)("div",X,(0,i.zw)(e.$t("tasks.amount")),1),(0,l._)("div",ee,(0,i.zw)(e.$t("tasks.description")),1),(0,l._)("div",te,(0,i.zw)(e.$t("tasks.amount")),1),(0,l._)("div",ae,(0,i.zw)(e.$t("common.unit")),1),(0,l._)("div",se,(0,i.zw)(e.$t("tasks.vendor")),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.taskObj.items,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"row pl-2 pb-1",key:e._id,index:t},[(0,l.Wm)(r,{class:"col-2 addPadding",id:"articleId",modelValue:e.articleId,"onUpdate:modelValue":t=>e.articleId=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-4",id:"description",modelValue:e.description,"onUpdate:modelValue":t=>e.description=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-1",id:"amount",modelValue:e.amount,"onUpdate:modelValue":t=>e.amount=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-2",id:"unitPackageInfo",modelValue:e.unitPackageInfo,"onUpdate:modelValue":t=>e.unitPackageInfo=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-2",id:"vendor",modelValue:e.vendor,"onUpdate:modelValue":t=>e.vendor=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(u,{class:"col-1",onClick:e=>n.onDeleteArticle(t)},{default:(0,l.w5)((()=>[oe])),_:2},1032,["onClick"])],8,le)))),128)),(0,l.Wm)(u,{variant:"primary mb-1",onClick:n.onAddArticle},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("tasks.add_item")),1)])),_:1},8,["onClick"]),(0,l.Wm)(u,{variant:"primary ml-2 mb-1",onClick:t[2]||(t[2]=e=>o.showSearchModal=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("tasks.search_item")),1)])),_:1}),ne,(0,l._)("b",null,(0,i.zw)(e.$t("tasks.work_time")),1),(0,l._)("div",ie,[(0,l._)("div",re,(0,i.zw)(e.$t("tasks.worker")),1),(0,l._)("div",de,(0,i.zw)(e.$t("tasks.price")),1),(0,l._)("div",ue,(0,i.zw)(e.$t("tasks.worker_time")),1)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.taskObj.workTime,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"row pl-2 pb-1",key:e._id,index:t},[(0,l.Wm)(r,{class:"col-3",id:"worker",modelValue:e.worker,"onUpdate:modelValue":t=>e.worker=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-2",id:"cost",modelValue:e.cost,"onUpdate:modelValue":t=>e.cost=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(r,{class:"col-2",id:"time",modelValue:e.time,"onUpdate:modelValue":t=>e.time=t,type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(u,{class:"col-1 ml-2",onClick:e=>n.onDeleteWorkTimeItem(t)},{default:(0,l.w5)((()=>[ce])),_:2},1032,["onClick"])],8,me)))),128)),(0,l.Wm)(u,{class:"mb-1",variant:"primary",onClick:n.onAddWorkTimeItem},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("tasks.add_work_item")),1)])),_:1},8,["onClick"]),he,(0,l.Wm)(d,{label:e.$t("tasks.drive_info"),"label-for":"driveInfo"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"driveInfo",modelValue:o.taskObj.driveInfo,"onUpdate:modelValue":t[3]||(t[3]=e=>o.taskObj.driveInfo=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("tasks.hotel_info"),"label-for":"hotelInfo"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"hotelInfo",modelValue:o.taskObj.hotelInfo,"onUpdate:modelValue":t[4]||(t[4]=e=>o.taskObj.hotelInfo=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("tasks.invoice_no"),"label-for":"invoiceNumber"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"invoiceNumber",modelValue:o.taskObj.invoiceNumber,"onUpdate:modelValue":t[5]||(t[5]=e=>o.taskObj.invoiceNumber=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("tasks.comments"),"label-for":"comments"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{id:"comments",modelValue:o.taskObj.comments,"onUpdate:modelValue":t[6]||(t[6]=e=>o.taskObj.comments=e),type:"text",rows:"4"},null,8,["modelValue"])])),_:1},8,["label"]),pe,(0,l.Wm)(d,{label:e.$t("tasks.status"),"label-for":"status"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{id:"status",modelValue:o.taskObj.status,"onUpdate:modelValue":t[7]||(t[7]=e=>o.taskObj.status=e),options:o.statusOptions,size:"m"},null,8,["modelValue","options"])])),_:1},8,["label"]),(0,l.Wm)(d,{label:e.$t("tasks.assignee"),"label-for":"assignee"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{id:"assignee",modelValue:o.taskObj.assignee,"onUpdate:modelValue":t[8]||(t[8]=e=>o.taskObj.assignee=e),type:"text"},null,8,["modelValue"])])),_:1},8,["label"]),be,(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"mx-auto",type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.save")),1)])),_:1})])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l._)("small",ge,"Debug Task ID:"+(0,i.zw)(o.taskObj._id),1)])),_:1})])),_:1},8,["onSubmit"]),(0,l.Wm)(w,{size:"xl",modelValue:o.showSearchModal,"onUpdate:modelValue":t[10]||(t[10]=e=>o.showSearchModal=e),scrollable:"",title:e.$t("common.search")},{"modal-footer":(0,l.w5)((()=>[we])),default:(0,l.w5)((()=>[(0,l.Wm)(g,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{onAddItem:t[9]||(t[9]=e=>n.onAddItemCallback(e))})])),_:1})])),_:1},8,["modelValue","title"])])}const ke={id:"search"},ve={class:"col-md-3"};function _e(e,t,a,s,o,n){const r=(0,l.up)("b-form-input"),d=(0,l.up)("b-button"),u=(0,l.up)("b-form"),m=(0,l.up)("b-table");return(0,l.wg)(),(0,l.iD)("div",ke,[(0,l.Wm)(u,{class:"form-inline",onSubmit:n.onSearch},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"col-md-9",state:n.queryState,modelValue:o.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),autofocus:""},null,8,["state","modelValue"]),(0,l._)("div",ve,[(0,l.Wm)(d,{type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])])),_:1},8,["onSubmit"]),(0,l.Wm)(m,{"font-size":"8",size:"sm",items:o.searchResults,fields:o.fields,"head-variant":"light"},{"cell(actions)":(0,l.w5)((t=>[(0,l.Wm)(d,{variant:"primary",onClick:e=>n.onAdd(t.item)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.select")),1)])),_:2},1032,["onClick"])])),_:1},8,["items","fields"])])}var ye={name:"ArticleSearch",props:{},data(){return{fields:[{key:"articleId",label:"ID"},{key:"description1",label:this.$t("articles.desc1")},{key:"description2",label:this.$t("articles.desc2")},{key:"packageUnit",label:this.$t("common.unit")},{key:"amountPerUnit",label:this.$t("articles.amount_per_unit")},{key:"price",label:this.$t("articles.price_in_â‚¬")},{key:"actions",label:this.$t("common.actions")}],searchQuery:"",searchResults:[]}},computed:{queryState(){return this.searchQuery.length>3}},methods:{onAdd(e){console.log(e),this.$emit("add-item",e)},onSearch(e){e.preventDefault(),console.log("onSearch"),g().get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((e=>{this.$log.info("search okay "),this.$log.debug(e.data.articles),this.searchResults=e.data.articles})).catch((e=>{this.$log.error("fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}}};const $e=(0,$.Z)(ye,[["render",_e],["__scopeId","data-v-f98c81b4"]]);var Ue=$e,Ve={name:"TaskList",props:{taskId:{type:String}},components:{ArticleSearch:Ue},data(){return{taskObj:{},showSearchModal:!1,statusOptions:[{value:"Neu",text:"Neu"},{value:"In Arbeit",text:"In Arbeit"},{value:"Rechnung machen",text:"Rechnung machen"},{value:"Rechnung Fertig",text:"Rechnung Fertig"},{value:"Warten auf Zahlung",text:"Warten auf Zahlung"},{value:"Fertig",text:"Fertig"}]}},methods:{onSubmit(e){e.preventDefault();const t={task:this.taskObj};g().post("/api/tasks/"+this.taskId,t).then((e=>{this.$log.debug("save okay "+e),this.$bvToast.toast(this.$t("tasks.task_saved_body"),{title:this.$t("tasks.task_saved"),solid:!0})})).catch((e=>{this.$log.error("create task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onAddArticle(){this.taskObj.items.push({articleId:"",description:"",amount:0,vendor:""})},onDeleteArticle(e){this.taskObj.items.splice(e,1)},onAddWorkTimeItem(){this.taskObj.workTime.push({worker:"",time:0})},onDeleteWorkTimeItem(e){this.taskObj.workTime.splice(e,1)},onAddItemCallback(e){this.$log.debug(e),this.showSearchModal=!1;let t={articleId:e.articleId,description:e.description1+", "+e.description2,amount:1,unitPackageInfo:e.amountPerUnit+" "+e.packageUnit,vendor:"",articleRef:e._id};this.taskObj.items.push(t);let a=this.taskObj.items.indexOf(t);g().get("/api/vendors/"+e.vendorRef).then((e=>{this.$log.debug("get vendor "),this.$log.debug(e),this.taskObj.items[a]["vendor"]=e.data.vendor.uploadName})).catch((e=>{this.$log.error("create task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}},mounted(){console.log(this.$route.params),console.log(JSON.stringify(this.taskId)),""!==this.taskId?(this.$log.debug(this.taskId),g().get("api/tasks/"+this.taskId).then((e=>{this.$log.debug(e),this.taskObj=e.data.task})).catch((e=>{this.$log.error("get task fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))):wt.push("/")}};const We=(0,$.Z)(Ve,[["render",fe],["__scopeId","data-v-380301d3"]]);var Te=We;const Ie=e=>((0,l.dD)("data-v-91aaa562"),e=e(),(0,l.Cn)(),e),Ae={id:"main"},Ce=Ie((()=>(0,l._)("h2",null,"User",-1)));function De(e,t,a,s,o,n){const r=(0,l.up)("TenantSelection");return(0,l.wg)(),(0,l.iD)("div",Ae,[Ce,(0,l.Uk)(" "+(0,i.zw)(this.userObj)+" ",1),(0,l.Wm)(r)])}const Oe=e=>((0,l.dD)("data-v-0152a2ab"),e=e(),(0,l.Cn)(),e),ze={id:"main"},Se=Oe((()=>(0,l._)("h2",null,"Tenant Selection",-1))),xe=["index"];function Ne(e,t,a,s,o,n){const r=(0,l.up)("b-form-radio"),d=(0,l.up)("b-form-group"),u=(0,l.up)("b-button"),m=(0,l.up)("b-form");return(0,l.wg)(),(0,l.iD)("div",ze,[Se,(0,l.Wm)(m,{onSubmit:n.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{label:"Select active tenant"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.tenantIDs,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:e,index:a},[(0,l.Wm)(r,{modelValue:o.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selected=e),name:"some-radios",value:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e),1)])),_:2},1032,["modelValue","value"])],8,xe)))),128))])),_:1}),(0,l.Wm)(u,{type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])),_:1},8,["onSubmit"])])}var je={name:"TenantSelection",data(){return{selected:""}},computed:{tenantIDs(){return this.$store.state.userObj.assignedTenants}},methods:{onSubmit(e){e.preventDefault();let t={tenantId:this.selected};g().post("/api/auth/selectTenant",t).then((e=>{this.$log.debug("selectTenant ok"),this.$log.debug(e.data)})).catch((e=>{this.$log.error("selectTenant fail "+e)}))}},mounted(){console.log(this.$store.state.userObj),console.log(this.tenantIDs),this.selected=this.$store.state.userObj.activeTenant}};const Pe=(0,$.Z)(je,[["render",Ne],["__scopeId","data-v-0152a2ab"]]);var Ee=Pe,Me={name:"UserView",components:{TenantSelection:Ee},data(){return{}},computed:{userObj(){return this.$store.state.userObj}},methods:{},mounted(){}};const Le=(0,$.Z)(Me,[["render",De],["__scopeId","data-v-91aaa562"]]);var Fe=Le;const Re=e=>((0,l.dD)("data-v-d70fd694"),e=e(),(0,l.Cn)(),e),Ze={id:"main"},Be=Re((()=>(0,l._)("h2",null,"User Mgmt",-1))),Qe=(0,l.Uk)("Edit"),He=(0,l.Uk)("Delete"),Ge=(0,l.Uk)("Create User"),Ke=Re((()=>(0,l._)("br",null,null,-1))),Ye=Re((()=>(0,l._)("h2",null,"Company Mgmt",-1))),qe=(0,l.Uk)("Edit"),Je=(0,l.Uk)("Delete"),Xe=(0,l.Uk)("Create Company"),et=(0,l.Uk)("Admin"),tt=(0,l.Uk)("Submit"),at=Re((()=>(0,l._)("div",null,null,-1))),st=(0,l.Uk)("Submit"),lt=Re((()=>(0,l._)("div",null,null,-1)));function ot(e,t,a,s,o,n){const i=(0,l.up)("b-checkbox"),r=(0,l.up)("b-button"),d=(0,l.up)("b-table"),u=(0,l.up)("b-form-input"),m=(0,l.up)("b-form-checkbox"),c=(0,l.up)("b-form"),h=(0,l.up)("b-container"),p=(0,l.up)("b-modal");return(0,l.wg)(),(0,l.iD)("div",Ze,[Be,(0,l.Wm)(d,{items:o.users,fields:o.userfields,busy:o.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(isGlobalAdmin)":(0,l.w5)((e=>[(0,l.Wm)(i,{modelValue:e.item.isGlobalAdmin,"onUpdate:modelValue":t=>e.item.isGlobalAdmin=t,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),"cell(actions)":(0,l.w5)((t=>[(0,l.Wm)(r,{size:"sm",onClick:e=>n.onEditUser(t.item),class:"mr-2"},{default:(0,l.w5)((()=>[Qe])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:a=>n.onDeleteUser(t.item,e.$evt),class:"mr-2",variant:"danger"},{default:(0,l.w5)((()=>[He])),_:2},1032,["onClick"])])),_:1},8,["items","fields","busy"]),(0,l.Wm)(r,{size:"sm",onClick:t[0]||(t[0]=e=>{o.showUserModal=!0,o.mode="create"}),class:"mr-2",variant:"success"},{default:(0,l.w5)((()=>[Ge])),_:1}),Ke,Ye,(0,l.Wm)(d,{items:o.tenants,fields:o.tenantfields,busy:o.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(actions)":(0,l.w5)((e=>[(0,l.Wm)(r,{size:"sm",onClick:t=>n.onEditTenant(e.item),class:"mr-2"},{default:(0,l.w5)((()=>[qe])),_:2},1032,["onClick"]),(0,l.Wm)(r,{size:"sm",onClick:t=>n.onDeleteTenant(e.item),class:"mr-2",variant:"danger"},{default:(0,l.w5)((()=>[Je])),_:2},1032,["onClick"])])),_:1},8,["items","fields","busy"]),(0,l.Wm)(r,{size:"sm",onClick:t[1]||(t[1]=e=>o.showTenantModal=!0),class:"mr-2",variant:"success"},{default:(0,l.w5)((()=>[Xe])),_:1}),(0,l.Wm)(p,{modelValue:o.showUserModal,"onUpdate:modelValue":t[8]||(t[8]=e=>o.showUserModal=e),title:"Create/Edit User"},{"modal-footer":(0,l.w5)((()=>[at])),default:(0,l.w5)((()=>[(0,l.Wm)(h,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onSubmit:n.onCreateOrEditUser},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.newUserDisplayName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.newUserDisplayName=e),type:"text",placeholder:"Display Name"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newUserMail,"onUpdate:modelValue":t[3]||(t[3]=e=>o.newUserMail=e),type:"text",placeholder:"Email"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newUserPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>o.newUserPassword=e),type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newUserAssignedTenants,"onUpdate:modelValue":t[5]||(t[5]=e=>o.newUserAssignedTenants=e),type:"text",placeholder:"AssignedTenants"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newUserisTennantAdmin,"onUpdate:modelValue":t[6]||(t[6]=e=>o.newUserisTennantAdmin=e),type:"text",placeholder:"isTennantAdmin"},null,8,["modelValue"]),(0,l.Wm)(m,{modelValue:o.newUserAdmin,"onUpdate:modelValue":t[7]||(t[7]=e=>o.newUserAdmin=e),type:"checkbox"},{default:(0,l.w5)((()=>[et])),_:1},8,["modelValue"]),(0,l.Wm)(r,{type:"submit",variant:"primary",class:"text-center"},{default:(0,l.w5)((()=>[tt])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(p,{modelValue:o.showTenantModal,"onUpdate:modelValue":t[12]||(t[12]=e=>o.showTenantModal=e),title:"Create Company"},{"modal-footer":(0,l.w5)((()=>[lt])),default:(0,l.w5)((()=>[(0,l.Wm)(h,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onSubmit:n.onCreateTenant},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.newCompanyID,"onUpdate:modelValue":t[9]||(t[9]=e=>o.newCompanyID=e),type:"text",placeholder:"Company ID"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newCompanyName,"onUpdate:modelValue":t[10]||(t[10]=e=>o.newCompanyName=e),type:"text",placeholder:"Company Name"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.newCompanyOwner,"onUpdate:modelValue":t[11]||(t[11]=e=>o.newCompanyOwner=e),type:"text",placeholder:"Owner ID"},null,8,["modelValue"]),(0,l.Wm)(r,{type:"submit",variant:"primary",class:"text-center"},{default:(0,l.w5)((()=>[st])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])}var nt={name:"AdminView",data(){return{showTenantModal:!1,newCompanyID:"",newCompanyName:"",newCompanyOwner:"",showUserModal:!1,mode:"create",editId:"",newUserDisplayName:"",newUserMail:"",newUserPassword:"",newUserAssignedTenants:"",newUserisTennantAdmin:"",newUserAdmin:Boolean,isBusy:!1,userfields:[{key:"id",label:"ID"},{key:"displayName",label:"Display Name"},{key:"email",label:"Email"},{key:"isGlobalAdmin",label:"Admin"},{key:"assignedTenants",label:"assignedTenants"},{key:"isTennantAdmin",label:"isTennantAdmin"},{key:"actions",label:"Actions"}],tenantfields:[{key:"tenantId",label:"ID"},{key:"companyName",label:"Name"},{key:"tenantOwner",label:"Owner"},{key:"actions",label:"Actions"}],users:[],tenants:[]}},computed:{},methods:{onCreateOrEditUser(e){e.preventDefault();const t={user:this.newUserDisplayName,email:this.newUserMail,pw:this.newUserPassword,isGlobalAdmin:this.newUserAdmin,assignedTenants:JSON.parse(this.newUserAssignedTenants),isTennantAdmin:JSON.parse(this.newUserisTennantAdmin)};"create"===this.mode?g().post("/api/users/",t).then((e=>{this.$log.debug("create okay "+e.status),this.clearUserModel()})).catch((e=>{this.$log.error("create fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})):(t.pw.startsWith("$2b")&&delete t.pw,g().post("/api/users/"+this.editId,t).then((e=>{this.$log.debug("udapte okay "+e.status),this.clearUserModel()})).catch((e=>{this.$log.error("udapte fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})))},clearUserModel(){this.showUserModal=!1,this.newUserDisplayName="",this.newUserMail="",this.newUserPassword="",this.newUserAssignedTenants='[ "10" ]',this.newUserisTennantAdmin='[ "10" ]',this.editId="",this.refreshTables()},onEditUser(e){this.mode="edit",this.newUserDisplayName=e.displayName,this.newUserMail=e.email,this.newUserPassword=e.password,this.newUserAdmin=e.isGlobalAdmin,this.newUserAssignedTenants=e.assignedTenants,this.newUserisTennantAdmin=e.isTennantAdmin,this.editId=e.id,this.showUserModal=!0},onDeleteUser(e){g()["delete"]("/api/users/"+e.id).then((e=>{this.$log.debug("delete okay "+e.status),this.refreshTables()})).catch((e=>{this.$log.error("delete fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTenant(e){e.preventDefault();const t={tenId:this.newCompanyID,companyName:this.newCompanyName,tenantOwner:this.newCompanyOwner};g().post("/api/tenants/",t).then((e=>{this.$log.debug("create okay "+e.status),this.showTenantModal=!1,this.newCompanyID="",this.newCompanyName="",this.newCompanyOwner="",this.refreshTables()})).catch((e=>{this.$log.error("create fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onEditTenant(e){this.newCompanyName=e.companyName},onDeleteTenant(e){console.log(e),g()["delete"]("/api/tenants/"+e.tenantId).then((e=>{this.$log.debug("delete okay "+e.status),this.refreshTables()})).catch((e=>{this.$log.error("delete fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables(){this.isBusy=!0,g().get("/api/users/").then((e=>{this.$log.debug("Users"),this.$log.debug(e.data),this.users=e.data.users})).catch((e=>{this.$log.error("get users fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),g().get("/api/tenants/").then((e=>{this.$log.debug("Tenants"),this.$log.debug(e.data),this.tenants=e.data.tenants})).catch((e=>this.handleAPIError(e))),this.isBusy=!1},handleAPIError(e){this.$log.error("api call fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}},mounted(){Z(this.$router,this.$store),this.refreshTables(),this.clearUserModel(),this.newCompanyOwner=this.$store.state.userObj.id}};const it=(0,$.Z)(nt,[["render",ot],["__scopeId","data-v-d70fd694"]]);var rt=it;const dt=e=>((0,l.dD)("data-v-4545e315"),e=e(),(0,l.Cn)(),e),ut={id:"main"},mt=dt((()=>(0,l._)("h2",null,"Datanorm",-1))),ct=dt((()=>(0,l._)("h2",null,"Test Modal Search",-1)));function ht(e,t,a,s,o,n){const r=(0,l.up)("b-form-input"),d=(0,l.up)("b-form-group"),u=(0,l.up)("b-form-file"),m=(0,l.up)("b-button"),c=(0,l.up)("b-form"),h=(0,l.up)("b-table"),p=(0,l.up)("ArticleSearch"),b=(0,l.up)("b-modal");return(0,l.wg)(),(0,l.iD)("div",ut,[mt,(0,l.Wm)(c,{onSubmit:n.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{id:"input-group-1",label:e.$t("vendor.datanorm_filename"),"label-for":"input-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{state:n.nameState,modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),placeholder:""},null,8,["state","modelValue"])])),_:1},8,["label"]),(0,l.Wm)(d,{id:"input-group-2",label:e.$t("vendor.datanorm_file"),"label-for":"file"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.file,"onUpdate:modelValue":t[1]||(t[1]=e=>o.file=e),state:Boolean(o.file),placeholder:e.$t("common.chooseordropfile"),"drop-placeholder":e.$t("common.dropfile"),"browse-text":e.$t("common.browse")},null,8,["modelValue","state","placeholder","drop-placeholder","browse-text"])])),_:1},8,["label"]),(0,l.Wm)(m,{type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])),_:1},8,["onSubmit"]),(0,l._)("h2",null,(0,i.zw)(e.$t("vendor.current_vendors")),1),(0,l.Wm)(h,{items:o.vendorList,fields:o.activefields,striped:"",hover:"",responsive:"sm"},{"cell(articles)":(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)(e.item.articles.length),1)])),"cell(actions)":(0,l.w5)((t=>[(0,l.Wm)(m,{size:"sm",onClick:e=>n.onConfirmDelete(t.item),class:"mr-2",variant:"danger",disabled:!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["items","fields"]),(0,l._)("h2",null,(0,i.zw)(e.$t("vendor.test_search")),1),(0,l.Wm)(c,{class:"form-inline",onSubmit:n.onSearch},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"col-8",state:n.queryState,modelValue:o.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchQuery=e)},null,8,["state","modelValue"]),(0,l.Wm)(m,{class:"col-2",type:"submit",variant:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.$t("common.submit")),1)])),_:1})])),_:1},8,["onSubmit"]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.searchResults,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"row pl-2 pb-1",key:e._id},(0,i.zw)(e.articleId)+" ## "+(0,i.zw)(e.description1)+" ## "+(0,i.zw)(e.description2)+" ## "+(0,i.zw)(e.price)+" â‚¬",1)))),128)),ct,(0,l.Wm)(p,{onAddItem:t[3]||(t[3]=e=>n.onAddItemCallback(e))}),(0,l.Wm)(b,{id:"delete-conformation","header-bg-variant":"warning",title:"Confirm",okVariant:"danger",onOk:n.onDelete},{default:(0,l.w5)((()=>[(0,l.Uk)("Do you really want to delete "+(0,i.zw)(this.vendorToDelete.uploadName)+"?",1)])),_:1},8,["onOk"])])}var pt={name:"DatanormView",components:{ArticleSearch:Ue},data(){return{name:"test",file:null,vendorList:[],vendorToDelete:{},searchQuery:"",searchResults:[],activefields:[{key:"vendorId",label:this.$t("vendor.vendorId"),sortable:!0},{key:"uploadName",label:this.$t("vendor.vendorName"),sortable:!0},{key:"file",label:this.$t("common.file"),sortable:!0},{key:"articles",label:this.$t("vendor.articles"),sortable:!0},{key:"tenantId",label:this.$t("vendor.tenantID"),sortable:!0},{key:"actions",label:this.$t("common.actions")}]}},computed:{nameState(){return this.name.length>0},queryState(){return this.searchQuery.length>3}},methods:{onAddItemCallback(e){this.$log.debug(e)},onSubmit(e){e.preventDefault();let t=new FormData;t.append("name",this.name),t.append("file",this.file),g().post("/api/vendors/uploadDatanorm",t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.$log.debug("Upload done"),this.$log.debug(e.data),this.$bvToast.toast("Yipii",{title:this.$t("vendor.upload_done"),variant:"success",solid:!0})})).catch((e=>{this.$log.error("Cannot upload "+e),this.showLoginFailedAlert=!0}))},onConfirmDelete(e){this.vendorToDelete=e,this.$bvModal.show("delete-conformation")},onDelete(){let e=this.vendorToDelete.vendorId;console.log("deleting"+e),g()["delete"]("/api/vendors/"+e).then((e=>{this.$log.info("delete okay "+e),this.$bvToast.toast("ok",{title:"Delete",solid:!0}),this.refreshTables()})).catch((e=>{this.$log.error("get users fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onSearch(e){e.preventDefault(),console.log("onSearch"),g().get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((e=>{this.$log.info("search okay "),this.$log.debug(e.data.articles),this.searchResults=e.data.articles,this.$bvToast.toast("ok",{title:"Search",solid:!0})})).catch((e=>{this.$log.error("fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables(){g().get("/api/vendors/").then((e=>{this.$log.debug("Vendors"),this.$log.debug(e.data),this.vendorList=e.data.vendors})).catch((e=>{401!=e.response.status&&(this.$log.error("get users fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0}))}))}},mounted(){Z(this.$router,this.$store),this.refreshTables()}};const bt=(0,$.Z)(pt,[["render",ht],["__scopeId","data-v-4545e315"]]);var gt=bt;s["default"].use(w["default"]);var wt=new w["default"]({routes:[{path:"/",name:"HelloWorld",component:S},{path:"/login",name:"Login",component:V},{path:"/tasklist",name:"Tasklist",component:H},{path:"/task/:id",name:"TaskView",component:Te,props:!0},{path:"/userview",name:"UserView",component:Fe},{path:"/admin",name:"AdminView",component:rt},{path:"/datanorm",name:"DatanormView",component:gt}]}),ft={name:"AppNavbar",props:{msg:String},data(){return{}},computed:{loggedIn(){return this.$store.getters.loggedIn},userObj(){return this.$store.state.userObj?this.$store.state.userObj:{}}},methods:{onLogout(){g().post("/api/auth/logout").then((e=>{this.$log.debug("Logged off"),this.$log.debug(e),this.$store.commit("setUserObj",null),wt.push("/")})).catch((e=>{this.$log.error("Cannot log off"+e)}))}},mounted(){g().get("/api/auth/loginCheck").then((e=>{this.$log.debug("Existing session found!"),this.$log.debug(e.data),this.$store.commit("setUserObj",e.data)})).catch()}};const kt=(0,$.Z)(ft,[["render",p],["__scopeId","data-v-6d7d8a69"]]);var vt=kt,_t={name:"app",components:{AppNavbar:vt},created(){document.title="OISM!"}};const yt=(0,$.Z)(_t,[["render",n]]);var $t=yt,Ut=a(9202),Vt=a(3017),Wt=(a(7024),a(7772)),Tt=a(7683),It=a(295),At=a(3090),Ct=a(3907);s["default"].use(Ct.ZP);const Dt=!1;var Ot=new Ct.ZP.Store({state:{userObj:null,isProduction:!0},getters:{loggedIn:e=>null!=e.userObj},mutations:{increment(e,t){e.count+=t},setUserObj(e,t){e.userObj=t},setProd(e,t){e.isProduction=t}},strict:Dt}),zt=a(101),St=a.n(zt),xt=a(9150);function Nt(){const e=a(8973),t={};return e.keys().forEach((a=>{const s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){const l=s[1];t[l]=e(a)}})),t}s["default"].use(xt["default"]);var jt=new xt["default"]({locale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_LOCALE||"en",fallbackLocale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:Nt()});const Pt=!0;s["default"].config.productionTip=Pt,s["default"].config.devtools=!Pt,s["default"].use(Ut.XG7),s["default"].use(Vt.A7),s["default"].use(Wt.A6),s["default"].use(Tt.k),s["default"].use(It.xL),s["default"].use(At.u3),Ot.commit("setProd",Pt),g().defaults.baseURL=Pt?"http://oism-api.ir-elektro.de/":"http://localhost:3000",g().defaults.withCredentials=!0,s["default"].use(St(),{isEnabled:!0,logLevel:Pt?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0}),new s["default"]({router:wt,store:Ot,i18n:jt,render:e=>e($t)}).$mount("#app")},8973:function(e,t,a){var s={};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=o,e.exports=l,l.id=8973}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],l=e[u][1],o=e[u][2];for(var i=!0,r=0;r<s.length;r++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,l,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,o,n=s[0],i=s[1],r=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(r)var u=r(a)}for(t&&t(s);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},s=self["webpackChunkoism_frontend"]=self["webpackChunkoism_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(661)}));s=a.O(s)})();
//# sourceMappingURL=app.5173a206.js.map
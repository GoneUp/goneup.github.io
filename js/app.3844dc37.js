(function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},o=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},1276:function(e,t,a){},"176e":function(e,t,a){"use strict";var n=a("f560"),s=a.n(n);s.a},"222a":function(e,t,a){},"3eff":function(e,t,a){},"4b4e":function(e,t,a){"use strict";var n=a("b348"),s=a.n(n);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("AppNavbar"),a("router-view")],1)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[a("b-navbar-brand",{attrs:{to:"/"}},[e._v("OISM")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{exact:"","exact-active-class":"active",to:"/tasklist"}},[e._v("Tasks")]),a("b-nav-item",{attrs:{exact:"","exact-active-class":"active",to:"/datanorm"}},[e._v("Vendor Mgmt")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}]},[e._v(e._s(e.userObj.displayName)+" ")]),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}]},[e._v(e._s(e.userObj.email)+" ")]),a("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:!e.loggedIn,expression:"!loggedIn"}],attrs:{to:"/login"}},[e._v("Login")]),a("b-nav-item-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}],attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("em",[e._v("User")])]},proxy:!0}])},[a("b-dropdown-item",{attrs:{to:"/userview"}},[e._v("Profile")]),a("b-dropdown-item",{attrs:{to:"/admin"}},[e._v("Admin")]),a("b-dropdown-item",{on:{click:function(t){return e.onLogout()}}},[e._v("Sign Out")])],1)],1)],1)],1)],1)},i=[],l=a("bc3a"),c=a.n(l),u=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("Login")]),a("b-alert",{attrs:{variant:"warning"},model:{value:e.showLoginFailedAlert,callback:function(t){e.showLoginFailedAlert=t},expression:"showLoginFailedAlert"}},[e._v("Username or Password wrong")]),a("b-form",{directives:[{name:"show",rawName:"v-show",value:!e.loggedIn,expression:"!loggedIn"}],on:{submit:e.onSubmit}},[a("b-form-input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),a("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loggedIn,expression:"loggedIn"}]},[e._v(" Already logged in ")])],1)},m=[],b={name:"Login",data:function(){return{user:"",password:"",showLoginFailedAlert:!1}},computed:{loggedIn:function(){return this.$store.getters.loggedIn}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var a={email:this.user,password:this.password};c.a.post("/api/auth/login",a).then((function(e){t.$log.debug("Logged in"),t.$log.debug(e.data),t.$store.commit("setUserObj",e.data),be.push("/")})).catch((function(e){t.$log.error("Cannot log in "+e),t.showLoginFailedAlert=!0}))}},mounted:function(){this.$store.state.isProduction||(this.user="admin",this.password="admin")}},f=b,p=(a("176e"),a("2877")),v=Object(p["a"])(f,d,m,!1,null,"595b47b6",null),h=v.exports,g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h2",[e._v("So ne Webseite")])])}],w={name:"HelloWorld",props:{msg:String}},y=w,_=(a("cf91"),Object(p["a"])(y,g,k,!1,null,"2f7c4932",null)),$=_.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("Tasklist")]),a("b-table",{attrs:{items:e.getActiveTasks,fields:e.activefields,busy:e.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(createdAt)",fn:function(t){return[e._v(e._s(new Date(t.item.createdAt).toLocaleString()))]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return e.onOpen(t.item)}}},[e._v("Open")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return e.onArchiveChange(t.item,!0)}}},[e._v("Archive")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.onDeleteTask(t.item,e.$evt)}}},[e._v("Delete")])]}}])}),a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(t){e.showModal=!0}}},[e._v("Create Task")]),a("br"),a("br"),a("br"),a("br"),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}]},[e._v("Archive")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[a("b-card",{attrs:{fluid:""}},[a("p",{staticClass:"col-xs-1",attrs:{align:"center"}},[a("b-table",{staticClass:"table",attrs:{align:"center",items:e.getInactiveTasks,fields:e.archivefields,striped:"",hover:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(a){return e.onOpen(t.item)}}},[e._v("Open")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return e.onArchiveChange(t.item,!1)}}},[e._v("Unarchive")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.onDeleteTask(t.item,e.$evt)}}},[e._v("Delete")])]}}])})],1)])],1),a("b-modal",{attrs:{title:"Create Task"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:e.onCreateTask}},[a("b-form-input",{attrs:{type:"text",placeholder:"Taskname"},model:{value:e.createTaskName,callback:function(t){e.createTaskName=t},expression:"createTaskName"}}),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1)],1)},I=[];a("4de4");function x(e,t){t.getters.loggedIn||(console.log("goto login"),e.push("Login"))}var A={name:"TaskList",data:function(){return{showModal:!1,createTaskName:"",isBusy:!1,activefields:[{key:"createdAt",label:"Created",sortable:!0},{key:"taskName",label:"Task Name",sortable:!0},{key:"customerName",label:"Customer",sortable:!0},{key:"assignee",label:"Assignee",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions"}],archivefields:[{key:"taskName",label:"Task Name"},{key:"actions",label:"Actions"}],tasks:[]}},computed:{getActiveTasks:function(){return this.tasks.filter((function(e){return!e.isArchived}))},getInactiveTasks:function(){return this.tasks.filter((function(e){return e.isArchived}))}},methods:{onOpen:function(e){be.push({name:"TaskView",params:{taskId:e._id}})},onArchiveChange:function(e,t){var a=this;e.isArchived=t,this.$log.error(this.tasks);var n={task:e};c.a.post("/api/tasks/"+e._id,n).then((function(e){a.$log.debug("save okay "+e),a.$bvToast.toast("Everything is good",{title:"Task saved",solid:!0}),a.refreshTable()})).catch((function(e){a.$log.error("update task fail "+e),a.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTask:function(e){var t=this;e.preventDefault();var a={taskName:this.createTaskName};c.a.post("/api/tasks/",a).then((function(e){t.$log.debug("create okay "+e.status),t.showModal=!1,t.createTaskName="",t.refreshTable()})).catch((function(e){t.$log.error(e),t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onDeleteTask:function(e,t){var a=this;c.a.delete("/api/tasks/"+e._id).then((function(e){a.$log.debug("delete okay "+e.status),a.refreshTable()})).catch((function(e){a.$log.error("delete task fail "+e),a.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),this.refreshTable(),t.target.blur()},refreshTable:function(){var e=this;this.isBusy=!0,c.a.get("/api/tasks/").then((function(t){e.$log.debug("Tasks"),e.$log.debug(t.data),e.tasks=t.data.tasks})).catch((function(t){401!=t.response.status&&(e.$log.error("get taskview fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0}))})),this.isBusy=!1}},beforeMount:function(){x(this.$router,this.$store)},mounted:function(){this.refreshTable()}},C=A,O=(a("a7bb"),Object(p["a"])(C,T,I,!1,null,"43e180e8",null)),U=O.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",{staticClass:"text-center"},[e._v("TaskView")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{label:"Task Name","label-for":"taskInput"}},[a("b-form-input",{attrs:{id:"taskInput",type:"text",size:"sm"},model:{value:e.taskObj.taskName,callback:function(t){e.$set(e.taskObj,"taskName",t)},expression:"taskObj.taskName"}})],1),a("b-form-group",{attrs:{label:"Customer","label-for":"costumerName"}},[a("b-form-input",{attrs:{id:"costumerName",type:"text",size:"sm"},model:{value:e.taskObj.customerName,callback:function(t){e.$set(e.taskObj,"customerName",t)},expression:"taskObj.customerName"}})],1),a("b",[e._v("Items")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[e._v("Article Id")]),a("div",{staticClass:"col-4"},[e._v("Description")]),a("div",{staticClass:"col-1"},[e._v("Amount")]),a("div",{staticClass:"col-2"},[e._v("Unit")]),a("div",{staticClass:"col-3"},[e._v("Vendor")])]),e._l(e.taskObj.items,(function(t,n){return a("div",{key:t._id,staticClass:"row pl-2 pb-1",attrs:{index:n}},[a("b-form-input",{staticClass:"col-2 addPadding",attrs:{id:"articleId",type:"text"},model:{value:t.articleId,callback:function(a){e.$set(t,"articleId",a)},expression:"row.articleId"}}),a("b-form-input",{staticClass:"col-4",attrs:{id:"description",type:"text"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"row.description"}}),a("b-form-input",{staticClass:"col-1",attrs:{id:"amount",type:"text"},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"row.amount"}}),a("b-form-input",{staticClass:"col-2",attrs:{id:"unitPackageInfo",type:"text"},model:{value:t.unitPackageInfo,callback:function(a){e.$set(t,"unitPackageInfo",a)},expression:"row.unitPackageInfo"}}),a("b-form-input",{staticClass:"col-2",attrs:{id:"vendor",type:"text"},model:{value:t.vendor,callback:function(a){e.$set(t,"vendor",a)},expression:"row.vendor"}}),a("b-button",{staticClass:"col-1",on:{click:function(t){return e.onDeleteArticle(n)}}},[e._v("X")])],1)})),a("b-button",{attrs:{variant:"primary"},on:{click:e.onAddArticle}},[e._v("Add Item")]),a("b-button",{attrs:{variant:"primary ml-2"},on:{click:function(t){e.showSearchModal=!0}}},[e._v("Search Item")]),a("br"),a("b",[e._v("Work Time Stuff")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[e._v("Worker")]),a("div",{staticClass:"col-2"},[e._v("Price")]),a("div",{staticClass:"col-2"},[e._v("Worker Time")])]),e._l(e.taskObj.workTime,(function(t,n){return a("div",{key:t._id,staticClass:"row pl-2 pb-1",attrs:{index:n}},[a("b-form-input",{staticClass:"col-3",attrs:{id:"worker",type:"text"},model:{value:t.worker,callback:function(a){e.$set(t,"worker",a)},expression:"row.worker"}}),a("b-form-input",{staticClass:"col-2",attrs:{id:"cost",type:"text"},model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"row.cost"}}),a("b-form-input",{staticClass:"col-2",attrs:{id:"time",type:"text"},model:{value:t.time,callback:function(a){e.$set(t,"time",a)},expression:"row.time"}}),a("b-button",{staticClass:"col-1 ml-2",on:{click:function(t){return e.onDeleteWorkTimeItem(n)}}},[e._v("X")])],1)})),a("b-button",{attrs:{variant:"primary"},on:{click:e.onAddWorkTimeItem}},[e._v("Add Work Item")]),a("b-form-group",{attrs:{label:"Drive Info","label-for":"driveInfo"}},[a("b-form-input",{attrs:{id:"driveInfo",type:"text"},model:{value:e.taskObj.driveInfo,callback:function(t){e.$set(e.taskObj,"driveInfo",t)},expression:"taskObj.driveInfo"}})],1),a("b-form-group",{attrs:{label:"Hotel Info","label-for":"hotelInfo"}},[a("b-form-input",{attrs:{id:"hotelInfo",type:"text"},model:{value:e.taskObj.hotelInfo,callback:function(t){e.$set(e.taskObj,"hotelInfo",t)},expression:"taskObj.hotelInfo"}})],1),a("b-form-group",{attrs:{label:"KWP Invoice Number","label-for":"invoiceNumber"}},[a("b-form-input",{attrs:{id:"invoiceNumber",type:"text"},model:{value:e.taskObj.invoiceNumber,callback:function(t){e.$set(e.taskObj,"invoiceNumber",t)},expression:"taskObj.invoiceNumber"}})],1),a("b-form-group",{attrs:{label:"Comments","label-for":"comments"}},[a("b-form-textarea",{attrs:{id:"comments",type:"text",rows:"4"},model:{value:e.taskObj.comments,callback:function(t){e.$set(e.taskObj,"comments",t)},expression:"taskObj.comments"}})],1),a("b-form-group",{attrs:{label:"Status","label-for":"status"}},[a("b-form-select",{attrs:{id:"status",options:e.statusOptions,size:"m"},model:{value:e.taskObj.status,callback:function(t){e.$set(e.taskObj,"status",t)},expression:"taskObj.status"}})],1),a("b-form-group",{attrs:{label:"Assignee","label-for":"assignee"}},[a("b-form-input",{attrs:{id:"assignee",type:"text"},model:{value:e.taskObj.assignee,callback:function(t){e.$set(e.taskObj,"assignee",t)},expression:"taskObj.assignee"}})],1),a("br"),a("b-button",{staticClass:"mx-auto",attrs:{type:"Save",variant:"primary"}},[e._v("Save")])],2),a("small",[e._v(e._s(e.taskObj.taskId))]),a("b-modal",{attrs:{size:"xl",scrollable:"",title:"Search"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:e.showSearchModal,callback:function(t){e.showSearchModal=t},expression:"showSearchModal"}},[a("b-container",{attrs:{fluid:""}},[a("ArticleSearch",{on:{"add-item":function(t){return e.onAddItemCallback(t)}}})],1)],1)],1)},j=[],N=(a("c975"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"search"}},[a("b-form",{staticClass:"form-inline",on:{submit:e.onSearch}},[a("b-form-input",{staticClass:"col-md-9",attrs:{state:e.queryState,autofocus:""},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),a("div",{staticClass:"col-md-3"},[a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1),a("b-table",{attrs:{"font-size":"8",size:"sm",items:e.searchResults,fields:e.fields,"head-variant":"light"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{attrs:{variant:"primary"},on:{click:function(a){return e.onAdd(t.item)}}},[e._v("Select")])]}}])})],1)}),D=[],P={name:"ArticleSearch",props:{},data:function(){return{fields:[{key:"articleId",label:"ID"},{key:"description1",label:"Description 1"},{key:"description2",label:"Description 2"},{key:"packageUnit",label:"Unit"},{key:"amountPerUnit",label:"Amount per Unit"},{key:"price",label:"Price in €"},{key:"actions",label:"Actions"}],searchQuery:"",searchResults:[]}},computed:{queryState:function(){return this.searchQuery.length>3}},methods:{onAdd:function(e){console.log(e),this.$emit("add-item",e)},onSearch:function(e){var t=this;e.preventDefault(),console.log("onSearch"),c.a.get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(e){t.$log.info("search okay "),t.$log.debug(e.data.articles),t.searchResults=e.data.articles})).catch((function(e){t.$log.error("fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}}},M=P,E=(a("feb3"),Object(p["a"])(M,N,D,!1,null,"2a7971af",null)),L=E.exports,z={name:"TaskList",props:{taskId:{type:String}},components:{ArticleSearch:L},data:function(){return{taskObj:{},showSearchModal:!1,statusOptions:[{value:"Neu",text:"Neu"},{value:"In Arbeit",text:"In Arbeit"},{value:"Rechnung machen",text:"Rechnung machen"},{value:"Rechnung Fertig",text:"Rechnung Fertig"},{value:"Warten auf Zahlung",text:"Warten auf Zahlung"},{value:"Fertig",text:"Fertig"}]}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var a={task:this.taskObj};c.a.post("/api/tasks/"+this.taskId,a).then((function(e){t.$log.debug("save okay "+e),t.$bvToast.toast("Everything is good",{title:"Task saved",solid:!0})})).catch((function(e){t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onAddArticle:function(){this.taskObj.items.push({articleId:"",description:"",amount:0,vendor:""})},onDeleteArticle:function(e){this.taskObj.items.splice(e,1)},onAddWorkTimeItem:function(){this.taskObj.workTime.push({worker:"",time:0})},onDeleteWorkTimeItem:function(e){this.taskObj.workTime.splice(e,1)},onAddItemCallback:function(e){var t=this;this.$log.debug(e),this.showSearchModal=!1;var a={articleId:e.articleId,description:e.description1+", "+e.description2,amount:1,unitPackageInfo:e.amountPerUnit+" "+e.packageUnit,vendor:"",articleRef:e._id};this.taskObj.items.push(a);var n=this.taskObj.items.indexOf(a);c.a.get("/api/vendors/"+e.vendorRef).then((function(e){t.$log.debug("get vendor "),t.$log.debug(e),t.taskObj.items[n]["vendor"]=e.data.vendor.uploadName})).catch((function(e){t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}},mounted:function(){var e=this;console.log(this.$route.params),console.log(JSON.stringify(this.taskId)),""!==this.taskId?(this.$log.debug(this.taskId),c.a.get("api/tasks/"+this.taskId).then((function(t){e.$log.debug(t),e.taskObj=t.data.task})).catch((function(t){e.$log.error("get task fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))):be.push("/")}},R=z,W=(a("856b"),Object(p["a"])(R,S,j,!1,null,"048cf39a",null)),V=W.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("User")]),e._v(" "+e._s(this.userObj)+" "),a("TenantSelection")],1)},Q=[],B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("Tenant Selection")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{label:"Select active tenant"}},e._l(e.tenantIDs,(function(t,n){return a("div",{key:t,attrs:{index:n}},[a("b-form-radio",{attrs:{name:"some-radios",value:t},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(e._s(t))])],1)})),0),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)},G=[],J={name:"TenantSelection",data:function(){return{selected:""}},computed:{tenantIDs:function(){return this.$store.state.userObj.assignedTenants}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var a={tenantId:this.selected};c.a.post("/api/auth/selectTenant",a).then((function(e){t.$log.debug("selectTenant ok"),t.$log.debug(e.data)})).catch((function(e){t.$log.error("selectTenant fail "+e)}))}},mounted:function(){console.log(this.$store.state.userObj),console.log(this.tenantIDs),this.selected=this.$store.state.userObj.activeTenant}},q=J,H=(a("891a"),Object(p["a"])(q,B,G,!1,null,"7b6454ec",null)),X=H.exports,Z={name:"UserView",components:{TenantSelection:X},data:function(){return{}},computed:{userObj:function(){return this.$store.state.userObj}},methods:{},mounted:function(){}},K=Z,Y=(a("e1c2"),Object(p["a"])(K,F,Q,!1,null,"6a40e4e2",null)),ee=Y.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("User Mgmt")]),a("b-table",{attrs:{items:e.users,fields:e.userfields,busy:e.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(isGlobalAdmin)",fn:function(t){return[a("b-checkbox",{attrs:{disabled:""},model:{value:t.item.isGlobalAdmin,callback:function(a){e.$set(t.item,"isGlobalAdmin",a)},expression:"row.item.isGlobalAdmin"}})]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return e.onEditUser(t.item)}}},[e._v("Edit")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.onDeleteUser(t.item,e.$evt)}}},[e._v("Delete")])]}}])}),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(t){e.showUserModal=!0,e.mode="create"}}},[e._v("Create User")]),a("br"),a("h2",[e._v("Company Mgmt")]),a("b-table",{attrs:{items:e.tenants,fields:e.tenantfields,busy:e.isBusy,striped:"",hover:"",responsive:"sm"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(a){return e.onEditTenant(t.item)}}},[e._v("Edit")]),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.onDeleteTenant(t.item)}}},[e._v("Delete")])]}}])}),a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(t){e.showTenantModal=!0}}},[e._v("Create Company")]),a("b-modal",{attrs:{title:"Create/Edit User"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:e.showUserModal,callback:function(t){e.showUserModal=t},expression:"showUserModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:e.onCreateOrEditUser}},[a("b-form-input",{attrs:{type:"text",placeholder:"Display Name"},model:{value:e.newUserDisplayName,callback:function(t){e.newUserDisplayName=t},expression:"newUserDisplayName"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.newUserMail,callback:function(t){e.newUserMail=t},expression:"newUserMail"}}),a("b-form-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.newUserPassword,callback:function(t){e.newUserPassword=t},expression:"newUserPassword"}}),a("b-form-input",{attrs:{type:"text",placeholder:"AssignedTenants"},model:{value:e.newUserAssignedTenants,callback:function(t){e.newUserAssignedTenants=t},expression:"newUserAssignedTenants"}}),a("b-form-input",{attrs:{type:"text",placeholder:"isTennantAdmin"},model:{value:e.newUserisTennantAdmin,callback:function(t){e.newUserisTennantAdmin=t},expression:"newUserisTennantAdmin"}}),a("b-form-checkbox",{attrs:{type:"checkbox"},model:{value:e.newUserAdmin,callback:function(t){e.newUserAdmin=t},expression:"newUserAdmin"}},[e._v("Admin")]),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1),a("b-modal",{attrs:{title:"Create Company"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}]),model:{value:e.showTenantModal,callback:function(t){e.showTenantModal=t},expression:"showTenantModal"}},[a("b-container",{attrs:{fluid:""}},[a("b-form",{on:{submit:e.onCreateTenant}},[a("b-form-input",{attrs:{type:"text",placeholder:"Company ID"},model:{value:e.newCompanyID,callback:function(t){e.newCompanyID=t},expression:"newCompanyID"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Company Name"},model:{value:e.newCompanyName,callback:function(t){e.newCompanyName=t},expression:"newCompanyName"}}),a("b-form-input",{attrs:{type:"text",placeholder:"Owner ID"},model:{value:e.newCompanyOwner,callback:function(t){e.newCompanyOwner=t},expression:"newCompanyOwner"}}),a("b-button",{staticClass:"text-center",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1)],1)},ae=[],ne=(a("2ca0"),{name:"AdminView",data:function(){return{showTenantModal:!1,newCompanyID:"",newCompanyName:"",newCompanyOwner:"",showUserModal:!1,mode:"create",editId:"",newUserDisplayName:"",newUserMail:"",newUserPassword:"",newUserAssignedTenants:"",newUserisTennantAdmin:"",newUserAdmin:Boolean,isBusy:!1,userfields:[{key:"id",label:"ID"},{key:"displayName",label:"Display Name"},{key:"email",label:"Email"},{key:"isGlobalAdmin",label:"Admin"},{key:"assignedTenants",label:"assignedTenants"},{key:"isTennantAdmin",label:"isTennantAdmin"},{key:"actions",label:"Actions"}],tenantfields:[{key:"tenantId",label:"ID"},{key:"companyName",label:"Name"},{key:"tenantOwner",label:"Owner"},{key:"actions",label:"Actions"}],users:[],tenants:[]}},computed:{},methods:{onCreateOrEditUser:function(e){var t=this;e.preventDefault();var a={user:this.newUserDisplayName,email:this.newUserMail,pw:this.newUserPassword,isGlobalAdmin:this.newUserAdmin,assignedTenants:JSON.parse(this.newUserAssignedTenants),isTennantAdmin:JSON.parse(this.newUserisTennantAdmin)};"create"===this.mode?c.a.post("/api/users/",a).then((function(e){t.$log.debug("create okay "+e.status),t.clearUserModel()})).catch((function(e){t.$log.error("create fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})):(a.pw.startsWith("$2b")&&delete a.pw,c.a.post("/api/users/"+this.editId,a).then((function(e){t.$log.debug("udapte okay "+e.status),t.clearUserModel()})).catch((function(e){t.$log.error("udapte fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})))},clearUserModel:function(){this.showUserModal=!1,this.newUserDisplayName="",this.newUserMail="",this.newUserPassword="",this.newUserAssignedTenants='[ "10" ]',this.newUserisTennantAdmin='[ "10" ]',this.editId="",this.refreshTables()},onEditUser:function(e){this.mode="edit",this.newUserDisplayName=e.displayName,this.newUserMail=e.email,this.newUserPassword=e.password,this.newUserAdmin=e.isGlobalAdmin,this.newUserAssignedTenants=e.assignedTenants,this.newUserisTennantAdmin=e.isTennantAdmin,this.editId=e.id,this.showUserModal=!0},onDeleteUser:function(e){var t=this;c.a.delete("/api/users/"+e.id).then((function(e){t.$log.debug("delete okay "+e.status),t.refreshTables()})).catch((function(e){t.$log.error("delete fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTenant:function(e){var t=this;e.preventDefault();var a={tenId:this.newCompanyID,companyName:this.newCompanyName,tenantOwner:this.newCompanyOwner};c.a.post("/api/tenants/",a).then((function(e){t.$log.debug("create okay "+e.status),t.showTenantModal=!1,t.newCompanyID="",t.newCompanyName="",t.newCompanyOwner="",t.refreshTables()})).catch((function(e){t.$log.error("create fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onEditTenant:function(e){this.newCompanyName=e.companyName},onDeleteTenant:function(e){var t=this;console.log(e),c.a.delete("/api/tenants/"+e.tenantId).then((function(e){t.$log.debug("delete okay "+e.status),t.refreshTables()})).catch((function(e){t.$log.error("delete fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var e=this;this.isBusy=!0,c.a.get("/api/users/").then((function(t){e.$log.debug("Users"),e.$log.debug(t.data),e.users=t.data.users})).catch((function(t){e.$log.error("get users fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})})),c.a.get("/api/tenants/").then((function(t){e.$log.debug("Tenants"),e.$log.debug(t.data),e.tenants=t.data.tenants})).catch((function(t){return e.handleAPIError(t)})),this.isBusy=!1},handleAPIError:function(e){this.$log.error("api call fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}},mounted:function(){x(this.$router,this.$store),this.refreshTables(),this.clearUserModel(),this.newCompanyOwner=this.$store.state.userObj.id}}),se=ne,oe=(a("7740"),Object(p["a"])(se,te,ae,!1,null,"57ceca93",null)),re=oe.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("h2",[e._v("Datanorm")]),a("b-form",{on:{submit:e.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Datanorm datanorm.001 Input name:","label-for":"input-1"}},[a("b-form-input",{attrs:{state:e.nameState,placeholder:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Datanorm File:","label-for":"file"}},[a("b-form-file",{attrs:{state:Boolean(e.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1),a("h2",[e._v("Current Vendors")]),e._l(e.vendorList,(function(t){return a("div",{key:t._id,staticClass:"row pl-2 pb-1"},[e._v(" "+e._s(t.vendorId)+" ## "+e._s(t.file)+" ## "+e._s(t.uploadName)+" ## "+e._s(t.articles.length)+" ## "),a("b-button",{attrs:{variant:"danger",disabled:!0},on:{click:function(a){return e.onDelete(t._id)}}},[e._v("Delete")])],1)})),a("h2",[e._v("Test Search")]),a("b-form",{staticClass:"form-inline",on:{submit:e.onSearch}},[a("b-form-input",{staticClass:"col-8",attrs:{state:e.queryState},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),a("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1),e._l(e.searchResults,(function(t){return a("div",{key:t._id,staticClass:"row pl-2 pb-1"},[e._v(" "+e._s(t.articleId)+" ## "+e._s(t.description1)+" ## "+e._s(t.description2)+" ## "+e._s(t.price)+" € ")])})),a("h2",[e._v("Test Modal Search")]),a("ArticleSearch",{on:{"add-item":function(t){return e.onAddItemCallback(t)}}})],2)},le=[],ce=(a("b0c0"),{name:"DatanormView",components:{ArticleSearch:L},data:function(){return{name:"test",file:null,vendorList:{},searchQuery:"",searchResults:[]}},computed:{nameState:function(){return this.name.length>0},queryState:function(){return this.searchQuery.length>3}},methods:{onAddItemCallback:function(e){this.$log.debug(e)},onSubmit:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("name",this.name),a.append("file",this.file),c.a.post("/api/vendors/uploadDatanorm",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.$log.debug("Upload done"),t.$log.debug(e.data),t.$bvToast.toast("Yipii",{title:"Upload complete",variant:"success",solid:!0})})).catch((function(e){t.$log.error("Cannot upload "+e),t.showLoginFailedAlert=!0}))},onDelete:function(e){console.log(e)},onSearch:function(e){var t=this;e.preventDefault(),console.log("onSearch"),c.a.get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(e){t.$log.info("search okay "),t.$log.debug(e.data.articles),t.searchResults=e.data.articles,t.$bvToast.toast("ok",{title:"Delete",solid:!0})})).catch((function(e){t.$log.error("fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var e=this;c.a.get("/api/vendors/").then((function(t){e.$log.debug("Vendors"),e.$log.debug(t.data),e.vendorList=t.data.vendors})).catch((function(t){401!=t.response.status&&(e.$log.error("get users fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0}))}))}},mounted:function(){x(this.$router,this.$store),this.refreshTables()}}),ue=ce,de=(a("4b4e"),Object(p["a"])(ue,ie,le,!1,null,"0719245e",null)),me=de.exports;n["default"].use(u["a"]);var be=new u["a"]({routes:[{path:"/",name:"HelloWorld",component:$},{path:"/login",name:"Login",component:h},{path:"/tasklist",name:"Tasklist",component:U},{path:"/task/:id",name:"TaskView",component:V,props:!0},{path:"/userview",name:"UserView",component:ee},{path:"/admin",name:"AdminView",component:re},{path:"/datanorm",name:"DatanormView",component:me}]}),fe={name:"AppNavbar",props:{msg:String},data:function(){return{}},computed:{loggedIn:function(){return this.$store.getters.loggedIn},userObj:function(){return this.$store.state.userObj?this.$store.state.userObj:{}}},methods:{onLogout:function(){var e=this;c.a.post("/api/auth/logout").then((function(t){e.$log.debug("Logged off"),e.$log.debug(t),e.$store.commit("setUserObj",null),be.push("/")})).catch((function(t){e.$log.error("Cannot log off"+t)}))}},mounted:function(){var e=this;c.a.get("/api/auth/loginCheck").then((function(t){e.$log.debug("Existing session found!"),e.$log.debug(t.data),e.$store.commit("setUserObj",t.data)})).catch()}},pe=fe,ve=(a("b237"),Object(p["a"])(pe,r,i,!1,null,"13f921ae",null)),he=ve.exports,ge={name:"app",components:{AppNavbar:he},created:function(){document.title="OISM!"}},ke=ge,we=(a("034f"),Object(p["a"])(ke,s,o,!1,null,null,null)),ye=we.exports,_e=a("5f5b"),$e=a("b1e0"),Te=(a("f9e3"),a("2dd8"),a("498a")),Ie=a("dbbe"),xe=a("a7e2"),Ae=a("f9bc"),Ce=a("2f62");n["default"].use(Ce["a"]);var Oe=!1,Ue=new Ce["a"].Store({state:{userObj:null,isProduction:!0},getters:{loggedIn:function(e){return null!=e.userObj}},mutations:{increment:function(e,t){e.count+=t},setUserObj:function(e,t){e.userObj=t},setProd:function(e,t){e.isProduction=t}},strict:Oe}),Se=a("85ff"),je=a.n(Se),Ne=!0;n["default"].config.productionTip=Ne,n["default"].config.devtools=!Ne,n["default"].use(_e["a"]),n["default"].use($e["a"]),n["default"].use(Te["a"]),n["default"].use(Ie["a"]),n["default"].use(xe["a"]),n["default"].use(Ae["a"]),Ue.commit("setProd",Ne),c.a.defaults.baseURL=Ne?"http://oism-api.ir-elektro.de/":"http://localhost:3000",c.a.defaults.withCredentials=!0,n["default"].use(je.a,{isEnabled:!0,logLevel:Ne?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0}),new n["default"]({router:be,store:Ue,render:function(e){return e(ye)}}).$mount("#app")},"5e85":function(e,t,a){},"70b2":function(e,t,a){},7740:function(e,t,a){"use strict";var n=a("ad8f"),s=a.n(n);s.a},"856b":function(e,t,a){"use strict";var n=a("3eff"),s=a.n(n);s.a},"85ec":function(e,t,a){},"891a":function(e,t,a){"use strict";var n=a("1276"),s=a.n(n);s.a},9053:function(e,t,a){},"9dac":function(e,t,a){},a7bb:function(e,t,a){"use strict";var n=a("9dac"),s=a.n(n);s.a},ad8f:function(e,t,a){},b237:function(e,t,a){"use strict";var n=a("9053"),s=a.n(n);s.a},b348:function(e,t,a){},cf91:function(e,t,a){"use strict";var n=a("5e85"),s=a.n(n);s.a},e1c2:function(e,t,a){"use strict";var n=a("222a"),s=a.n(n);s.a},f560:function(e,t,a){},feb3:function(e,t,a){"use strict";var n=a("70b2"),s=a.n(n);s.a}});
//# sourceMappingURL=app.3844dc37.js.map
(function(){var e={661:function(e,t,n){"use strict";n(6992),n(8674),n(9601),n(7727);var a=n(9812),o=n(6252),r={id:"app"};function l(e,t,n,a,l,i){var s=(0,o.up)("AppNavbar"),u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(s),(0,o.Wm)(u)])}var i=n(3577),s=n(9963),u=function(e){return(0,o.dD)("data-v-6d7d8a69"),e=e(),(0,o.Cn)(),e},d={id:"main"},c=(0,o.Uk)("Login"),m=u((function(){return(0,o._)("em",null,"User",-1)})),f=(0,o.Uk)("Admin");function p(e,t,n,a,r,l){var u=(0,o.up)("b-navbar-brand"),p=(0,o.up)("b-navbar-toggle"),h=(0,o.up)("b-nav-item"),b=(0,o.up)("b-navbar-nav"),g=(0,o.up)("b-dropdown-item"),v=(0,o.up)("b-nav-item-dropdown"),w=(0,o.up)("b-collapse"),k=(0,o.up)("b-navbar");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(k,{toggleable:"lg",type:"dark",variant:"info"},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{to:"/"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.title")),1)]})),_:1}),(0,o.Wm)(p,{target:"nav-collapse"}),(0,o.Wm)(w,{id:"nav-collapse","is-nav":""},{default:(0,o.w5)((function(){return[(0,o.Wm)(b,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(h,{exact:"","exact-active-class":"active",to:"/tasklist"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("nav.tasks")),1)]})),_:1}),(0,o.Wm)(h,{exact:"","exact-active-class":"active",to:"/datanorm"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("nav.vendor_mgmt")),1)]})),_:1})]})),_:1}),(0,o.Wm)(b,{class:"ml-auto"},{default:(0,o.w5)((function(){return[(0,o.wy)((0,o.Wm)(h,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(l.userObj.displayName),1)]})),_:1},512),[[s.F8,l.loggedIn]]),(0,o.wy)((0,o.Wm)(h,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(l.userObj.email),1)]})),_:1},512),[[s.F8,l.loggedIn]]),(0,o.wy)((0,o.Wm)(h,{to:"/login"},{default:(0,o.w5)((function(){return[c]})),_:1},512),[[s.F8,!l.loggedIn]]),(0,o.wy)((0,o.Wm)(v,{right:""},{"button-content":(0,o.w5)((function(){return[m]})),default:(0,o.w5)((function(){return[(0,o.Wm)(g,{to:"/userview"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("nav.profile")),1)]})),_:1}),(0,o.Wm)(g,{to:"/admin"},{default:(0,o.w5)((function(){return[f]})),_:1}),(0,o.Wm)(g,{onClick:t[0]||(t[0]=function(e){return l.onLogout()})},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("nav.sign_out")),1)]})),_:1})]})),_:1},512),[[s.F8,l.loggedIn]])]})),_:1})]})),_:1})]})),_:1})])}n(7658);var h=n(9669),b=n.n(h),g=n(2201),v=function(e){return(0,o.dD)("data-v-2ace275a"),e=e(),(0,o.Cn)(),e},w={id:"main"},k=v((function(){return(0,o._)("h2",null,"Login",-1)}));function _(e,t,n,a,r,l){var u=(0,o.up)("b-alert"),d=(0,o.up)("b-form-input"),c=(0,o.up)("b-button"),m=(0,o.up)("b-form");return(0,o.wg)(),(0,o.iD)("div",w,[k,(0,o.Wm)(u,{modelValue:r.showLoginFailedAlert,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.showLoginFailedAlert=e}),variant:"warning"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("login.userorpwwrong")),1)]})),_:1},8,["modelValue"]),(0,o.wy)((0,o.Wm)(m,{onSubmit:l.onSubmit},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{modelValue:r.user,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.user=e}),type:"text",placeholder:"Username"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.password=e}),type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,o.Wm)(c,{type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})]})),_:1},8,["onSubmit"]),[[s.F8,!l.loggedIn]]),(0,o.wy)((0,o._)("div",null," Already logged in ",512),[[s.F8,l.loggedIn]])])}var y={name:"Login",data:function(){return{user:"",password:"",showLoginFailedAlert:!1}},computed:{loggedIn:function(){return this.$store.getters.loggedIn}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var n={email:this.user,password:this.password};b().post("/api/auth/login",n).then((function(e){t.$log.debug("Logged in"),t.$log.debug(e.data),t.$store.commit("setUserObj",e.data),gt.push("/")})).catch((function(e){t.$log.error("Cannot log in "+e),t.showLoginFailedAlert=!0}))}},mounted:function(){this.$store.state.isProduction||(this.user="admin",this.password="admin")}},$=n(3744);const U=(0,$.Z)(y,[["render",_],["__scopeId","data-v-2ace275a"]]);var V=U,W=function(e){return(0,o.dD)("data-v-4b6c6562"),e=e(),(0,o.Cn)(),e},T={class:"hello"},I={class:"locale-changer"},A=["value"],C=W((function(){return(0,o._)("p",{class:"bottom-align-text center"},"Â© Henry ðŸš€ðŸš€ðŸš€",-1)}));function D(e,t,n,a,r,l){return(0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("h2",null,(0,i.zw)(e.$t("common.welcome")),1),(0,o._)("p",null,(0,i.zw)(e.$t("common.changelanguage")),1),(0,o._)("div",I,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.$i18n.locale=t})},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.langs,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{key:"Lang".concat(t),value:e},(0,i.zw)(e),9,A)})),128))],512),[[s.bM,e.$i18n.locale]])]),C])}var O={name:"HelloWorld",props:{msg:String},data:function(){return{langs:["en","de"]}}};const z=(0,$.Z)(O,[["render",D],["__scopeId","data-v-4b6c6562"]]);var S=z,x=function(e){return(0,o.dD)("data-v-022d94a8"),e=e(),(0,o.Cn)(),e},N={id:"main"},j=x((function(){return(0,o._)("br",null,null,-1)})),P=x((function(){return(0,o._)("br",null,null,-1)})),E=x((function(){return(0,o._)("br",null,null,-1)})),M=x((function(){return(0,o._)("br",null,null,-1)})),L={class:"col-xs-1",align:"center"},F=x((function(){return(0,o._)("div",null,null,-1)}));function R(e,t,n,a,r,l){var s=(0,o.up)("b-button"),u=(0,o.up)("b-table"),d=(0,o.up)("b-card"),c=(0,o.up)("b-collapse"),m=(0,o.up)("b-form-input"),f=(0,o.up)("b-form"),p=(0,o.up)("b-container"),h=(0,o.up)("b-modal"),b=(0,o.Q2)("b-toggle");return(0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("h2",null,(0,i.zw)(e.$t("tasks.tasklist")),1),(0,o.Wm)(u,{items:l.getActiveTasks,fields:r.activefields,busy:r.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(createdAt)":(0,o.w5)((function(e){return[(0,o.Uk)((0,i.zw)(new Date(e.item.createdAt).toLocaleString()),1)]})),"cell(actions)":(0,o.w5)((function(t){return[(0,o.Wm)(s,{size:"sm",onClick:function(e){return l.onOpen(t.item)},class:"mr-2",variant:"success"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.open")),1)]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(e){return l.onArchiveChange(t.item,!0)},class:"mr-2"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.archive")),1)]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(n){return l.onDeleteTask(t.item,e.$evt)},class:"mr-2",variant:"danger"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.delete")),1)]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields","busy"]),(0,o.Wm)(s,{variant:"primary",size:"sm",onClick:t[0]||(t[0]=function(e){return r.showModal=!0})},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("tasks.create_task")),1)]})),_:1}),j,P,E,M,(0,o.wy)(((0,o.wg)(),(0,o.j4)(s,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.archive")),1)]})),_:1})),[[b,void 0,void 0,{"collapse-1":!0}]]),(0,o.Wm)(c,{id:"collapse-1",class:"mt-2"},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{fluid:""},{default:(0,o.w5)((function(){return[(0,o._)("p",L,[(0,o.Wm)(u,{class:"table",align:"center",items:l.getInactiveTasks,fields:r.archivefields,striped:"",hover:"",responsive:"sm"},{"cell(actions)":(0,o.w5)((function(t){return[(0,o.Wm)(s,{size:"sm",onClick:function(e){return l.onOpen(t.item)},class:"mr-2",variant:"success"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.open")),1)]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(e){return l.onArchiveChange(t.item,!0)},class:"mr-2"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.archive")),1)]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(n){return l.onDeleteTask(t.item,e.$evt)},class:"mr-2",variant:"danger"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.delete")),1)]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields"])])]})),_:1})]})),_:1}),(0,o.Wm)(h,{modelValue:r.showModal,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.showModal=e}),title:e.$t("tasks.create_task")},{"modal-footer":(0,o.w5)((function(){return[F]})),default:(0,o.w5)((function(){return[(0,o.Wm)(p,{fluid:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{onSubmit:l.onCreateTask},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{modelValue:r.createTaskName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.createTaskName=e}),type:"text",placeholder:e.$t("tasks.task_name")},null,8,["modelValue","placeholder"]),(0,o.Wm)(s,{center:"",type:"submit",variant:"primary",class:"text-center"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["modelValue","title"])])}n(7327),n(1539);function Z(e,t){t.getters.loggedIn||(console.log("goto login"),e.push("Login"))}var B={name:"TaskList",data:function(){return{showModal:!1,createTaskName:"",isBusy:!1,activefields:[{key:"createdAt",label:this.$t("tasks.created"),sortable:!0},{key:"taskName",label:this.$t("tasks.task_name"),sortable:!0},{key:"customerName",label:this.$t("tasks.customer"),sortable:!0},{key:"assignee",label:this.$t("tasks.assignee"),sortable:!0},{key:"status",label:this.$t("tasks.status"),sortable:!0},{key:"actions",label:this.$t("common.actions")}],archivefields:[{key:"taskName",label:this.$t("tasks.task_name")},{key:"actions",label:this.$t("common.actions")}],tasks:[]}},computed:{getActiveTasks:function(){return this.tasks.filter((function(e){return!e.isArchived}))},getInactiveTasks:function(){return this.tasks.filter((function(e){return e.isArchived}))}},methods:{onOpen:function(e){gt.push({name:"TaskView",params:{taskId:e._id}})},onArchiveChange:function(e,t){var n=this;e.isArchived=t,this.$log.error(this.tasks);var a={task:e};b().post("/api/tasks/"+e._id,a).then((function(e){n.$log.debug("save okay "+e),n.$bvToast.toast("Everything is good",{title:n.$t("tasks.task_saved"),solid:!0}),n.refreshTable()})).catch((function(e){n.$log.error("update task fail "+e),n.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTask:function(e){var t=this;e.preventDefault();var n={taskName:this.createTaskName};b().post("/api/tasks/",n).then((function(e){t.$log.debug("create okay "+e.status),t.showModal=!1,t.createTaskName="",t.refreshTable()})).catch((function(e){t.$log.error(e),t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onDeleteTask:function(e,t){var n=this;b()["delete"]("/api/tasks/"+e._id).then((function(e){n.$log.debug("delete okay "+e.status),n.refreshTable()})).catch((function(e){n.$log.error("delete task fail "+e),n.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})),this.refreshTable(),t.target.blur()},refreshTable:function(){var e=this;this.isBusy=!0,b().get("/api/tasks/").then((function(t){e.$log.debug("Tasks"),e.$log.debug(t.data),e.tasks=t.data.tasks})).catch((function(t){401!=t.response.status&&(e.$log.error("get taskview fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0}))})),this.isBusy=!1}},beforeMount:function(){Z(this.$router,this.$store)},mounted:function(){this.refreshTable()}};const Q=(0,$.Z)(B,[["render",R],["__scopeId","data-v-022d94a8"]]);var H=Q,G=(n(2526),n(1817),function(e){return(0,o.dD)("data-v-380301d3"),e=e(),(0,o.Cn)(),e}),K={id:"main"},Y={class:"text-center"},q=G((function(){return(0,o._)("hr",null,null,-1)})),J={class:"row"},X={class:"col-2"},ee={class:"col-4"},te={class:"col-1"},ne={class:"col-2"},ae={class:"col-3"},oe=["index"],re=(0,o.Uk)("X"),le=G((function(){return(0,o._)("br",null,null,-1)})),ie={class:"row"},se={class:"col-3"},ue={class:"col-2"},de={class:"col-2"},ce=["index"],me=(0,o.Uk)("X"),fe=G((function(){return(0,o._)("hr",null,null,-1)})),pe=G((function(){return(0,o._)("hr",null,null,-1)})),he=G((function(){return(0,o._)("br",null,null,-1)})),be={class:"mx-auto"},ge=G((function(){return(0,o._)("div",null,null,-1)}));function ve(e,t,n,a,r,l){var s=(0,o.up)("b-form-input"),u=(0,o.up)("b-form-group"),d=(0,o.up)("b-button"),c=(0,o.up)("b-form-textarea"),m=(0,o.up)("b-form-select"),f=(0,o.up)("b-row"),p=(0,o.up)("b-form"),h=(0,o.up)("ArticleSearch"),b=(0,o.up)("b-container"),g=(0,o.up)("b-modal");return(0,o.wg)(),(0,o.iD)("div",K,[(0,o._)("h2",Y,(0,i.zw)(e.$t("tasks.taskview")),1),(0,o.Wm)(p,{onSubmit:l.onSubmit},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{label:e.$t("tasks.task_name"),"label-cols-md":"2","label-cols-sm":"3","label-class":"taskLabel","label-for":"taskInput"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"taskInput",modelValue:r.taskObj.taskName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.taskObj.taskName=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),(0,o.Wm)(u,{label:e.$t("tasks.customer"),"label-cols-md":"2","label-cols-sm":"3","label-for":"costumerName"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"costumerName",modelValue:r.taskObj.customerName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.taskObj.customerName=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),q,(0,o._)("b",null,(0,i.zw)(e.$t("tasks.items")),1),(0,o._)("div",J,[(0,o._)("div",X,(0,i.zw)(e.$t("tasks.amount")),1),(0,o._)("div",ee,(0,i.zw)(e.$t("tasks.description")),1),(0,o._)("div",te,(0,i.zw)(e.$t("tasks.amount")),1),(0,o._)("div",ne,(0,i.zw)(e.$t("common.unit")),1),(0,o._)("div",ae,(0,i.zw)(e.$t("tasks.vendor")),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.taskObj.items,(function(e,t){return(0,o.wg)(),(0,o.iD)("div",{class:"row pl-2 pb-1",key:e._id,index:t},[(0,o.Wm)(s,{class:"col-2 addPadding",id:"articleId",modelValue:e.articleId,"onUpdate:modelValue":function(t){return e.articleId=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-4",id:"description",modelValue:e.description,"onUpdate:modelValue":function(t){return e.description=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-1",id:"amount",modelValue:e.amount,"onUpdate:modelValue":function(t){return e.amount=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-2",id:"unitPackageInfo",modelValue:e.unitPackageInfo,"onUpdate:modelValue":function(t){return e.unitPackageInfo=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-2",id:"vendor",modelValue:e.vendor,"onUpdate:modelValue":function(t){return e.vendor=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(d,{class:"col-1",onClick:function(e){return l.onDeleteArticle(t)}},{default:(0,o.w5)((function(){return[re]})),_:2},1032,["onClick"])],8,oe)})),128)),(0,o.Wm)(d,{variant:"primary mb-1",onClick:l.onAddArticle},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("tasks.add_item")),1)]})),_:1},8,["onClick"]),(0,o.Wm)(d,{variant:"primary ml-2 mb-1",onClick:t[2]||(t[2]=function(e){return r.showSearchModal=!0})},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("tasks.search_item")),1)]})),_:1}),le,(0,o._)("b",null,(0,i.zw)(e.$t("tasks.work_time")),1),(0,o._)("div",ie,[(0,o._)("div",se,(0,i.zw)(e.$t("tasks.worker")),1),(0,o._)("div",ue,(0,i.zw)(e.$t("tasks.price")),1),(0,o._)("div",de,(0,i.zw)(e.$t("tasks.worker_time")),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.taskObj.workTime,(function(e,t){return(0,o.wg)(),(0,o.iD)("div",{class:"row pl-2 pb-1",key:e._id,index:t},[(0,o.Wm)(s,{class:"col-3",id:"worker",modelValue:e.worker,"onUpdate:modelValue":function(t){return e.worker=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-2",id:"cost",modelValue:e.cost,"onUpdate:modelValue":function(t){return e.cost=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(s,{class:"col-2",id:"time",modelValue:e.time,"onUpdate:modelValue":function(t){return e.time=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(d,{class:"col-1 ml-2",onClick:function(e){return l.onDeleteWorkTimeItem(t)}},{default:(0,o.w5)((function(){return[me]})),_:2},1032,["onClick"])],8,ce)})),128)),(0,o.Wm)(d,{class:"mb-1",variant:"primary",onClick:l.onAddWorkTimeItem},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("tasks.add_work_item")),1)]})),_:1},8,["onClick"]),fe,(0,o.Wm)(u,{label:e.$t("tasks.drive_info"),"label-for":"driveInfo"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"driveInfo",modelValue:r.taskObj.driveInfo,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.taskObj.driveInfo=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),(0,o.Wm)(u,{label:e.$t("tasks.hotel_info"),"label-for":"hotelInfo"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"hotelInfo",modelValue:r.taskObj.hotelInfo,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.taskObj.hotelInfo=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),(0,o.Wm)(u,{label:e.$t("tasks.invoice_no"),"label-for":"invoiceNumber"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"invoiceNumber",modelValue:r.taskObj.invoiceNumber,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.taskObj.invoiceNumber=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),(0,o.Wm)(u,{label:e.$t("tasks.comments"),"label-for":"comments"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{id:"comments",modelValue:r.taskObj.comments,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.taskObj.comments=e}),type:"text",rows:"4"},null,8,["modelValue"])]})),_:1},8,["label"]),pe,(0,o.Wm)(u,{label:e.$t("tasks.status"),"label-for":"status"},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{id:"status",modelValue:r.taskObj.status,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.taskObj.status=e}),options:r.statusOptions,size:"m"},null,8,["modelValue","options"])]})),_:1},8,["label"]),(0,o.Wm)(u,{label:e.$t("tasks.assignee"),"label-for":"assignee"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{id:"assignee",modelValue:r.taskObj.assignee,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.taskObj.assignee=e}),type:"text"},null,8,["modelValue"])]})),_:1},8,["label"]),he,(0,o.Wm)(f,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{class:"mx-auto",type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.save")),1)]})),_:1})]})),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((function(){return[(0,o._)("small",be,"Debug Task ID:"+(0,i.zw)(r.taskObj._id),1)]})),_:1})]})),_:1},8,["onSubmit"]),(0,o.Wm)(g,{size:"xl",modelValue:r.showSearchModal,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.showSearchModal=e}),scrollable:"",title:e.$t("common.search")},{"modal-footer":(0,o.w5)((function(){return[ge]})),default:(0,o.w5)((function(){return[(0,o.Wm)(b,{fluid:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(h,{onAddItem:t[9]||(t[9]=function(e){return l.onAddItemCallback(e)})})]})),_:1})]})),_:1},8,["modelValue","title"])])}n(561),n(8862);var we={id:"search"},ke={class:"col-md-3"};function _e(e,t,n,a,r,l){var s=(0,o.up)("b-form-input"),u=(0,o.up)("b-button"),d=(0,o.up)("b-form"),c=(0,o.up)("b-table");return(0,o.wg)(),(0,o.iD)("div",we,[(0,o.Wm)(d,{class:"form-inline",onSubmit:l.onSearch},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{class:"col-md-9",state:l.queryState,modelValue:r.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.searchQuery=e}),autofocus:""},null,8,["state","modelValue"]),(0,o._)("div",ke,[(0,o.Wm)(u,{type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})])]})),_:1},8,["onSubmit"]),(0,o.Wm)(c,{"font-size":"8",size:"sm",items:r.searchResults,fields:r.fields,"head-variant":"light"},{"cell(actions)":(0,o.w5)((function(t){return[(0,o.Wm)(u,{variant:"primary",onClick:function(e){return l.onAdd(t.item)}},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.select")),1)]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields"])])}var ye={name:"ArticleSearch",props:{},data:function(){return{fields:[{key:"articleId",label:"ID"},{key:"description1",label:this.$t("articles.desc1")},{key:"description2",label:this.$t("articles.desc2")},{key:"packageUnit",label:this.$t("common.unit")},{key:"amountPerUnit",label:this.$t("articles.amount_per_unit")},{key:"price",label:this.$t("articles.price_in_â‚¬")},{key:"actions",label:this.$t("common.actions")}],searchQuery:"",searchResults:[]}},computed:{queryState:function(){return this.searchQuery.length>3}},methods:{onAdd:function(e){console.log(e),this.$emit("add-item",e)},onSearch:function(e){var t=this;e.preventDefault(),console.log("onSearch"),b().get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(e){t.$log.info("search okay "),t.$log.debug(e.data.articles),t.searchResults=e.data.articles})).catch((function(e){t.$log.error("fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}}};const $e=(0,$.Z)(ye,[["render",_e],["__scopeId","data-v-f98c81b4"]]);var Ue=$e,Ve={name:"TaskList",props:{taskId:{type:String}},components:{ArticleSearch:Ue},data:function(){return{taskObj:{},showSearchModal:!1,statusOptions:[{value:"Neu",text:"Neu"},{value:"In Arbeit",text:"In Arbeit"},{value:"Rechnung machen",text:"Rechnung machen"},{value:"Rechnung Fertig",text:"Rechnung Fertig"},{value:"Warten auf Zahlung",text:"Warten auf Zahlung"},{value:"Fertig",text:"Fertig"}]}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var n={task:this.taskObj};b().post("/api/tasks/"+this.taskId,n).then((function(e){t.$log.debug("save okay "+e),t.$bvToast.toast(t.$t("tasks.task_saved_body"),{title:t.$t("tasks.task_saved"),solid:!0})})).catch((function(e){t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onAddArticle:function(){this.taskObj.items.push({articleId:"",description:"",amount:0,vendor:""})},onDeleteArticle:function(e){this.taskObj.items.splice(e,1)},onAddWorkTimeItem:function(){this.taskObj.workTime.push({worker:"",time:0})},onDeleteWorkTimeItem:function(e){this.taskObj.workTime.splice(e,1)},onAddItemCallback:function(e){var t=this;this.$log.debug(e),this.showSearchModal=!1;var n={articleId:e.articleId,description:e.description1+", "+e.description2,amount:1,unitPackageInfo:e.amountPerUnit+" "+e.packageUnit,vendor:"",articleRef:e._id};this.taskObj.items.push(n);var a=this.taskObj.items.indexOf(n);b().get("/api/vendors/"+e.vendorRef).then((function(e){t.$log.debug("get vendor "),t.$log.debug(e),t.taskObj.items[a]["vendor"]=e.data.vendor.uploadName})).catch((function(e){t.$log.error("create task fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))}},mounted:function(){var e=this;console.log(this.$route.params),console.log(JSON.stringify(this.taskId)),""!==this.taskId?(this.$log.debug(this.taskId),b().get("api/tasks/"+this.taskId).then((function(t){e.$log.debug(t),e.taskObj=t.data.task})).catch((function(t){e.$log.error("get task fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))):gt.push("/")}};const We=(0,$.Z)(Ve,[["render",ve],["__scopeId","data-v-380301d3"]]);var Te=We,Ie=function(e){return(0,o.dD)("data-v-91aaa562"),e=e(),(0,o.Cn)(),e},Ae={id:"main"},Ce=Ie((function(){return(0,o._)("h2",null,"User",-1)}));function De(e,t,n,a,r,l){var s=(0,o.up)("TenantSelection");return(0,o.wg)(),(0,o.iD)("div",Ae,[Ce,(0,o.Uk)(" "+(0,i.zw)(this.userObj)+" ",1),(0,o.Wm)(s)])}var Oe=function(e){return(0,o.dD)("data-v-0152a2ab"),e=e(),(0,o.Cn)(),e},ze={id:"main"},Se=Oe((function(){return(0,o._)("h2",null,"Tenant Selection",-1)})),xe=["index"];function Ne(e,t,n,a,r,l){var s=(0,o.up)("b-form-radio"),u=(0,o.up)("b-form-group"),d=(0,o.up)("b-button"),c=(0,o.up)("b-form");return(0,o.wg)(),(0,o.iD)("div",ze,[Se,(0,o.Wm)(c,{onSubmit:l.onSubmit},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{label:"Select active tenant"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.tenantIDs,(function(e,n){return(0,o.wg)(),(0,o.iD)("div",{key:e,index:n},[(0,o.Wm)(s,{modelValue:r.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.selected=e}),name:"some-radios",value:e},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e),1)]})),_:2},1032,["modelValue","value"])],8,xe)})),128))]})),_:1}),(0,o.Wm)(d,{type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})]})),_:1},8,["onSubmit"])])}var je={name:"TenantSelection",data:function(){return{selected:""}},computed:{tenantIDs:function(){return this.$store.state.userObj.assignedTenants}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var n={tenantId:this.selected};b().post("/api/auth/selectTenant",n).then((function(e){t.$log.debug("selectTenant ok"),t.$log.debug(e.data)})).catch((function(e){t.$log.error("selectTenant fail "+e)}))}},mounted:function(){console.log(this.$store.state.userObj),console.log(this.tenantIDs),this.selected=this.$store.state.userObj.activeTenant}};const Pe=(0,$.Z)(je,[["render",Ne],["__scopeId","data-v-0152a2ab"]]);var Ee=Pe,Me={name:"UserView",components:{TenantSelection:Ee},data:function(){return{}},computed:{userObj:function(){return this.$store.state.userObj}},methods:{},mounted:function(){}};const Le=(0,$.Z)(Me,[["render",De],["__scopeId","data-v-91aaa562"]]);var Fe=Le,Re=function(e){return(0,o.dD)("data-v-d70fd694"),e=e(),(0,o.Cn)(),e},Ze={id:"main"},Be=Re((function(){return(0,o._)("h2",null,"User Mgmt",-1)})),Qe=(0,o.Uk)("Edit"),He=(0,o.Uk)("Delete"),Ge=(0,o.Uk)("Create User"),Ke=Re((function(){return(0,o._)("br",null,null,-1)})),Ye=Re((function(){return(0,o._)("h2",null,"Company Mgmt",-1)})),qe=(0,o.Uk)("Edit"),Je=(0,o.Uk)("Delete"),Xe=(0,o.Uk)("Create Company"),et=(0,o.Uk)("Admin"),tt=(0,o.Uk)("Submit"),nt=Re((function(){return(0,o._)("div",null,null,-1)})),at=(0,o.Uk)("Submit"),ot=Re((function(){return(0,o._)("div",null,null,-1)}));function rt(e,t,n,a,r,l){var i=(0,o.up)("b-checkbox"),s=(0,o.up)("b-button"),u=(0,o.up)("b-table"),d=(0,o.up)("b-form-input"),c=(0,o.up)("b-form-checkbox"),m=(0,o.up)("b-form"),f=(0,o.up)("b-container"),p=(0,o.up)("b-modal");return(0,o.wg)(),(0,o.iD)("div",Ze,[Be,(0,o.Wm)(u,{items:r.users,fields:r.userfields,busy:r.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(isGlobalAdmin)":(0,o.w5)((function(e){return[(0,o.Wm)(i,{modelValue:e.item.isGlobalAdmin,"onUpdate:modelValue":function(t){return e.item.isGlobalAdmin=t},disabled:""},null,8,["modelValue","onUpdate:modelValue"])]})),"cell(actions)":(0,o.w5)((function(t){return[(0,o.Wm)(s,{size:"sm",onClick:function(e){return l.onEditUser(t.item)},class:"mr-2"},{default:(0,o.w5)((function(){return[Qe]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(n){return l.onDeleteUser(t.item,e.$evt)},class:"mr-2",variant:"danger"},{default:(0,o.w5)((function(){return[He]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields","busy"]),(0,o.Wm)(s,{size:"sm",onClick:t[0]||(t[0]=function(e){r.showUserModal=!0,r.mode="create"}),class:"mr-2",variant:"success"},{default:(0,o.w5)((function(){return[Ge]})),_:1}),Ke,Ye,(0,o.Wm)(u,{items:r.tenants,fields:r.tenantfields,busy:r.isBusy,striped:"",hover:"",responsive:"sm"},{"cell(actions)":(0,o.w5)((function(e){return[(0,o.Wm)(s,{size:"sm",onClick:function(t){return l.onEditTenant(e.item)},class:"mr-2"},{default:(0,o.w5)((function(){return[qe]})),_:2},1032,["onClick"]),(0,o.Wm)(s,{size:"sm",onClick:function(t){return l.onDeleteTenant(e.item)},class:"mr-2",variant:"danger"},{default:(0,o.w5)((function(){return[Je]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields","busy"]),(0,o.Wm)(s,{size:"sm",onClick:t[1]||(t[1]=function(e){return r.showTenantModal=!0}),class:"mr-2",variant:"success"},{default:(0,o.w5)((function(){return[Xe]})),_:1}),(0,o.Wm)(p,{modelValue:r.showUserModal,"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.showUserModal=e}),title:"Create/Edit User"},{"modal-footer":(0,o.w5)((function(){return[nt]})),default:(0,o.w5)((function(){return[(0,o.Wm)(f,{fluid:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{onSubmit:l.onCreateOrEditUser},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{modelValue:r.newUserDisplayName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.newUserDisplayName=e}),type:"text",placeholder:"Display Name"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newUserMail,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.newUserMail=e}),type:"text",placeholder:"Email"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newUserPassword,"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.newUserPassword=e}),type:"password",placeholder:"Password"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newUserAssignedTenants,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.newUserAssignedTenants=e}),type:"text",placeholder:"AssignedTenants"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newUserisTennantAdmin,"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.newUserisTennantAdmin=e}),type:"text",placeholder:"isTennantAdmin"},null,8,["modelValue"]),(0,o.Wm)(c,{modelValue:r.newUserAdmin,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.newUserAdmin=e}),type:"checkbox"},{default:(0,o.w5)((function(){return[et]})),_:1},8,["modelValue"]),(0,o.Wm)(s,{type:"submit",variant:"primary",class:"text-center"},{default:(0,o.w5)((function(){return[tt]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["modelValue"]),(0,o.Wm)(p,{modelValue:r.showTenantModal,"onUpdate:modelValue":t[12]||(t[12]=function(e){return r.showTenantModal=e}),title:"Create Company"},{"modal-footer":(0,o.w5)((function(){return[ot]})),default:(0,o.w5)((function(){return[(0,o.Wm)(f,{fluid:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{onSubmit:l.onCreateTenant},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{modelValue:r.newCompanyID,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.newCompanyID=e}),type:"text",placeholder:"Company ID"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newCompanyName,"onUpdate:modelValue":t[10]||(t[10]=function(e){return r.newCompanyName=e}),type:"text",placeholder:"Company Name"},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:r.newCompanyOwner,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.newCompanyOwner=e}),type:"text",placeholder:"Owner ID"},null,8,["modelValue"]),(0,o.Wm)(s,{type:"submit",variant:"primary",class:"text-center"},{default:(0,o.w5)((function(){return[at]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1},8,["modelValue"])])}n(6755);var lt={name:"AdminView",data:function(){return{showTenantModal:!1,newCompanyID:"",newCompanyName:"",newCompanyOwner:"",showUserModal:!1,mode:"create",editId:"",newUserDisplayName:"",newUserMail:"",newUserPassword:"",newUserAssignedTenants:"",newUserisTennantAdmin:"",newUserAdmin:Boolean,isBusy:!1,userfields:[{key:"id",label:"ID"},{key:"displayName",label:"Display Name"},{key:"email",label:"Email"},{key:"isGlobalAdmin",label:"Admin"},{key:"assignedTenants",label:"assignedTenants"},{key:"isTennantAdmin",label:"isTennantAdmin"},{key:"actions",label:"Actions"}],tenantfields:[{key:"tenantId",label:"ID"},{key:"companyName",label:"Name"},{key:"tenantOwner",label:"Owner"},{key:"actions",label:"Actions"}],users:[],tenants:[]}},computed:{},methods:{onCreateOrEditUser:function(e){var t=this;e.preventDefault();var n={user:this.newUserDisplayName,email:this.newUserMail,pw:this.newUserPassword,isGlobalAdmin:this.newUserAdmin,assignedTenants:JSON.parse(this.newUserAssignedTenants),isTennantAdmin:JSON.parse(this.newUserisTennantAdmin)};"create"===this.mode?b().post("/api/users/",n).then((function(e){t.$log.debug("create okay "+e.status),t.clearUserModel()})).catch((function(e){t.$log.error("create fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})):(n.pw.startsWith("$2b")&&delete n.pw,b().post("/api/users/"+this.editId,n).then((function(e){t.$log.debug("udapte okay "+e.status),t.clearUserModel()})).catch((function(e){t.$log.error("udapte fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})})))},clearUserModel:function(){this.showUserModal=!1,this.newUserDisplayName="",this.newUserMail="",this.newUserPassword="",this.newUserAssignedTenants='[ "10" ]',this.newUserisTennantAdmin='[ "10" ]',this.editId="",this.refreshTables()},onEditUser:function(e){this.mode="edit",this.newUserDisplayName=e.displayName,this.newUserMail=e.email,this.newUserPassword=e.password,this.newUserAdmin=e.isGlobalAdmin,this.newUserAssignedTenants=e.assignedTenants,this.newUserisTennantAdmin=e.isTennantAdmin,this.editId=e.id,this.showUserModal=!0},onDeleteUser:function(e){var t=this;b()["delete"]("/api/users/"+e.id).then((function(e){t.$log.debug("delete okay "+e.status),t.refreshTables()})).catch((function(e){t.$log.error("delete fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onCreateTenant:function(e){var t=this;e.preventDefault();var n={tenId:this.newCompanyID,companyName:this.newCompanyName,tenantOwner:this.newCompanyOwner};b().post("/api/tenants/",n).then((function(e){t.$log.debug("create okay "+e.status),t.showTenantModal=!1,t.newCompanyID="",t.newCompanyName="",t.newCompanyOwner="",t.refreshTables()})).catch((function(e){t.$log.error("create fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},onEditTenant:function(e){this.newCompanyName=e.companyName},onDeleteTenant:function(e){var t=this;console.log(e),b()["delete"]("/api/tenants/"+e.tenantId).then((function(e){t.$log.debug("delete okay "+e.status),t.refreshTables()})).catch((function(e){t.$log.error("delete fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var e=this;this.isBusy=!0,b().get("/api/users/").then((function(t){e.$log.debug("Users"),e.$log.debug(t.data),e.users=t.data.users})).catch((function(t){e.$log.error("get users fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})})),b().get("/api/tenants/").then((function(t){e.$log.debug("Tenants"),e.$log.debug(t.data),e.tenants=t.data.tenants})).catch((function(t){return e.handleAPIError(t)})),this.isBusy=!1},handleAPIError:function(e){this.$log.error("api call fail "+e),this.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}},mounted:function(){Z(this.$router,this.$store),this.refreshTables(),this.clearUserModel(),this.newCompanyOwner=this.$store.state.userObj.id}};const it=(0,$.Z)(lt,[["render",rt],["__scopeId","data-v-d70fd694"]]);var st=it,ut=(n(8309),function(e){return(0,o.dD)("data-v-4545e315"),e=e(),(0,o.Cn)(),e}),dt={id:"main"},ct=ut((function(){return(0,o._)("h2",null,"Datanorm",-1)})),mt=ut((function(){return(0,o._)("h2",null,"Test Modal Search",-1)}));function ft(e,t,n,a,r,l){var s=this,u=(0,o.up)("b-form-input"),d=(0,o.up)("b-form-group"),c=(0,o.up)("b-form-file"),m=(0,o.up)("b-button"),f=(0,o.up)("b-form"),p=(0,o.up)("b-table"),h=(0,o.up)("ArticleSearch"),b=(0,o.up)("b-modal");return(0,o.wg)(),(0,o.iD)("div",dt,[ct,(0,o.Wm)(f,{onSubmit:l.onSubmit},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{id:"input-group-1",label:e.$t("vendor.datanorm_filename"),"label-for":"input-1"},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{state:l.nameState,modelValue:r.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.name=e}),placeholder:""},null,8,["state","modelValue"])]})),_:1},8,["label"]),(0,o.Wm)(d,{id:"input-group-2",label:e.$t("vendor.datanorm_file"),"label-for":"file"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:r.file,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.file=e}),state:Boolean(r.file),placeholder:e.$t("common.chooseordropfile"),"drop-placeholder":e.$t("common.dropfile"),"browse-text":e.$t("common.browse")},null,8,["modelValue","state","placeholder","drop-placeholder","browse-text"])]})),_:1},8,["label"]),(0,o.Wm)(m,{type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})]})),_:1},8,["onSubmit"]),(0,o._)("h2",null,(0,i.zw)(e.$t("vendor.current_vendors")),1),(0,o.Wm)(p,{items:r.vendorList,fields:r.activefields,striped:"",hover:"",responsive:"sm"},{"cell(articles)":(0,o.w5)((function(e){return[(0,o.Uk)((0,i.zw)(e.item.articles.length),1)]})),"cell(actions)":(0,o.w5)((function(t){return[(0,o.Wm)(m,{size:"sm",onClick:function(e){return l.onConfirmDelete(t.item)},class:"mr-2",variant:"danger",disabled:!0},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.delete")),1)]})),_:2},1032,["onClick"])]})),_:1},8,["items","fields"]),(0,o._)("h2",null,(0,i.zw)(e.$t("vendor.test_search")),1),(0,o.Wm)(f,{class:"form-inline",onSubmit:l.onSearch},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{class:"col-8",state:l.queryState,modelValue:r.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.searchQuery=e})},null,8,["state","modelValue"]),(0,o.Wm)(m,{class:"col-2",type:"submit",variant:"primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(e.$t("common.submit")),1)]})),_:1})]})),_:1},8,["onSubmit"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.searchResults,(function(e){return(0,o.wg)(),(0,o.iD)("div",{class:"row pl-2 pb-1",key:e._id},(0,i.zw)(e.articleId)+" ## "+(0,i.zw)(e.description1)+" ## "+(0,i.zw)(e.description2)+" ## "+(0,i.zw)(e.price)+" â‚¬",1)})),128)),mt,(0,o.Wm)(h,{onAddItem:t[3]||(t[3]=function(e){return l.onAddItemCallback(e)})}),(0,o.Wm)(b,{id:"delete-conformation","header-bg-variant":"warning",title:"Confirm",okVariant:"danger",onOk:l.onDelete},{default:(0,o.w5)((function(){return[(0,o.Uk)("Do you really want to delete "+(0,i.zw)(s.vendorToDelete.uploadName)+"?",1)]})),_:1},8,["onOk"])])}var pt={name:"DatanormView",components:{ArticleSearch:Ue},data:function(){return{name:"test",file:null,vendorList:[],vendorToDelete:{},searchQuery:"",searchResults:[],activefields:[{key:"vendorId",label:this.$t("vendor.vendorId"),sortable:!0},{key:"uploadName",label:this.$t("vendor.vendorName"),sortable:!0},{key:"file",label:this.$t("common.file"),sortable:!0},{key:"articles",label:this.$t("vendor.articles"),sortable:!0},{key:"tenantId",label:this.$t("vendor.tenantID"),sortable:!0},{key:"actions",label:this.$t("common.actions")}]}},computed:{nameState:function(){return this.name.length>0},queryState:function(){return this.searchQuery.length>3}},methods:{onAddItemCallback:function(e){this.$log.debug(e)},onSubmit:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("name",this.name),n.append("file",this.file),b().post("/api/vendors/uploadDatanorm",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.$log.debug("Upload done"),t.$log.debug(e.data),t.$bvToast.toast("Yipii",{title:t.$t("vendor.upload_done"),variant:"success",solid:!0})})).catch((function(e){t.$log.error("Cannot upload "+e),t.showLoginFailedAlert=!0}))},onConfirmDelete:function(e){this.vendorToDelete=e,this.$bvModal.show("delete-conformation")},onDelete:function(){var e=this,t=this.vendorToDelete.vendorId;console.log("deleting"+t),b()["delete"]("/api/vendors/"+t).then((function(t){e.$log.info("delete okay "+t),e.$bvToast.toast("ok",{title:"Delete",solid:!0}),e.refreshTables()})).catch((function(t){e.$log.error("get users fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0})}))},onSearch:function(e){var t=this;e.preventDefault(),console.log("onSearch"),b().get("/api/vendors/search/"+encodeURIComponent(this.searchQuery)).then((function(e){t.$log.info("search okay "),t.$log.debug(e.data.articles),t.searchResults=e.data.articles,t.$bvToast.toast("ok",{title:"Search",solid:!0})})).catch((function(e){t.$log.error("fail "+e),t.$bvToast.toast(e.message,{title:"API Error",variant:"danger",solid:!0})}))},refreshTables:function(){var e=this;b().get("/api/vendors/").then((function(t){e.$log.debug("Vendors"),e.$log.debug(t.data),e.vendorList=t.data.vendors})).catch((function(t){401!=t.response.status&&(e.$log.error("get users fail "+t),e.$bvToast.toast(t.message,{title:"API Error",variant:"danger",solid:!0}))}))}},mounted:function(){Z(this.$router,this.$store),this.refreshTables()}};const ht=(0,$.Z)(pt,[["render",ft],["__scopeId","data-v-4545e315"]]);var bt=ht;a["default"].use(g["default"]);var gt=new g["default"]({routes:[{path:"/",name:"HelloWorld",component:S},{path:"/login",name:"Login",component:V},{path:"/tasklist",name:"Tasklist",component:H},{path:"/task/:id",name:"TaskView",component:Te,props:!0},{path:"/userview",name:"UserView",component:Fe},{path:"/admin",name:"AdminView",component:st},{path:"/datanorm",name:"DatanormView",component:bt}]}),vt={name:"AppNavbar",props:{msg:String},data:function(){return{}},computed:{loggedIn:function(){return this.$store.getters.loggedIn},userObj:function(){return this.$store.state.userObj?this.$store.state.userObj:{}}},methods:{onLogout:function(){var e=this;b().post("/api/auth/logout").then((function(t){e.$log.debug("Logged off"),e.$log.debug(t),e.$store.commit("setUserObj",null),gt.push("/")})).catch((function(t){e.$log.error("Cannot log off"+t)}))}},mounted:function(){var e=this;b().get("/api/auth/loginCheck").then((function(t){e.$log.debug("Existing session found!"),e.$log.debug(t.data),e.$store.commit("setUserObj",t.data)})).catch()}};const wt=(0,$.Z)(vt,[["render",p],["__scopeId","data-v-6d7d8a69"]]);var kt=wt,_t={name:"app",components:{AppNavbar:kt},created:function(){document.title="OISM!"}};const yt=(0,$.Z)(_t,[["render",l]]);var $t=yt,Ut=n(9202),Vt=n(3017),Wt=(n(7024),n(7772)),Tt=n(7683),It=n(295),At=n(3090),Ct=n(3907);a["default"].use(Ct.ZP);var Dt=!1,Ot=new Ct.ZP.Store({state:{userObj:null,isProduction:!0},getters:{loggedIn:function(e){return null!=e.userObj}},mutations:{increment:function(e,t){e.count+=t},setUserObj:function(e,t){e.userObj=t},setProd:function(e,t){e.isProduction=t}},strict:Dt}),zt=n(101),St=n.n(zt),xt=(n(4747),n(3948),n(4916),n(4723),n(9150));function Nt(){var e=n(8973),t={};return e.keys().forEach((function(n){var a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var o=a[1];t[o]=e(n)}})),t}a["default"].use(xt["default"]);var jt=new xt["default"]({locale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_LOCALE||"en",fallbackLocale:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:Nt()}),Pt=!0;a["default"].config.productionTip=Pt,a["default"].config.devtools=!Pt,a["default"].use(Ut.XG7),a["default"].use(Vt.A7),a["default"].use(Wt.A6),a["default"].use(Tt.k),a["default"].use(It.xL),a["default"].use(At.u3),Ot.commit("setProd",Pt),b().defaults.baseURL=Pt?"http://oism-api.ir-elektro.de/":"http://localhost:3000",b().defaults.withCredentials=!0,a["default"].use(St(),{isEnabled:!0,logLevel:Pt?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0}),new a["default"]({router:gt,store:Ot,i18n:jt,render:function(e){return e($t)}}).$mount("#app")},8973:function(e,t,n){var a={};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=8973}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var i=!0,s=0;s<a.length;s++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,l=a[0],i=a[1],s=a[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(s)var d=s(n)}for(t&&t(a);u<l.length;u++)r=l[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=self["webpackChunkoism_frontend"]=self["webpackChunkoism_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(661)}));a=n.O(a)})();
//# sourceMappingURL=app-legacy.dd2f3cad.js.map